ğŸ“¦ CAJA 07: ARSENAL DE HERRAMIENTAS
Desglose AtÃ³mico Completo

Copyâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                      â•‘
â•‘                    ğŸ“¦ CAJA 07: ARSENAL DE HERRAMIENTAS                               â•‘
â•‘                                                                                      â•‘
â•‘    "Las armas que transforman la intenciÃ³n en acciÃ³n medible"                        â•‘
â•‘                                                                                      â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘    â”‚                                                                            â”‚   â•‘
â•‘    â”‚   ğŸ”§ 07.1 Arquitectura    ğŸ”§ 07.2 Biblioteca     ğŸ”§ 07.3 Templo           â”‚   â•‘
â•‘    â”‚   del Arsenal            de Poder (Lectura)    del Hierro (Gym)          â”‚   â•‘
â•‘    â”‚                                                                            â”‚   â•‘
â•‘    â”‚   ğŸ”§ 07.4 CÃ¡mara         ğŸ”§ 07.5 BitÃ¡cora       ğŸ”§ 07.6 Vitalidad         â”‚   â•‘
â•‘    â”‚   de MeditaciÃ³n          de Guerra (Journal)   Sexual (Kegel)            â”‚   â•‘
â•‘    â”‚                                                                            â”‚   â•‘
â•‘    â”‚   ğŸ”§ 07.7 Escultor       ğŸ”§ 07.8 Crea tu        ğŸ”§ 07.9 Movilidad         â”‚   â•‘
â•‘    â”‚   Facial (Mewing)        Hipnosis [PREMIUM]    TÃ¡ctica (Stretch)         â”‚   â•‘
â•‘    â”‚                                                                            â”‚   â•‘
â•‘    â”‚   ğŸ”§ 07.10 Focus                                                          â”‚   â•‘
â•‘    â”‚   Chamber (Pomodoro)                                                      â”‚   â•‘
â•‘    â”‚                                                                            â”‚   â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                                      â•‘
â•‘    Responsable: Claude (DiseÃ±o) â†’ Antigravity (ImplementaciÃ³n)                      â•‘
â•‘    Entregables: 9 herramientas funcionales + arquitectura compartida                â•‘
â•‘    Tiempo Estimado: 3-4 dÃ­as de implementaciÃ³n                                      â•‘
â•‘                                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ÃNDICE DE DESGLOSE ATÃ“MICO - CAJA 07

SUBCAJA 07.1: Arquitectura del Arsenal
SUBCAJA 07.2: Biblioteca de Poder (Lectura)
SUBCAJA 07.3: Templo del Hierro (Gym)
SUBCAJA 07.4: CÃ¡mara de MeditaciÃ³n
SUBCAJA 07.5: BitÃ¡cora de Guerra (Journal)
SUBCAJA 07.6: Vitalidad Sexual (Kegel)
SUBCAJA 07.7: Escultor Facial (Mewing)
SUBCAJA 07.8: Crea tu Hipnosis [PREMIUM]
SUBCAJA 07.9: Movilidad TÃ¡ctica (Stretching)
SUBCAJA 07.10: Focus Chamber (Pomodoro)


MAPEO HERRAMIENTAS â†’ ARQUETIPOS â†’ VECTORES
Copyâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     MAPEO HERRAMIENTAS â†’ SISTEMA DE VECTORES                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                    â•‘
â•‘  HERRAMIENTA              â”‚ TAREA(S)           â”‚ ARQUETIPO      â”‚ VECTOR          â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘
â•‘  Biblioteca de Poder      â”‚ reading            â”‚ MENTAL         â”‚ aura_lvl        â•‘
â•‘  Templo del Hierro        â”‚ strength, cardio   â”‚ FÃSICO         â”‚ muscle/fat_lvl  â•‘
â•‘  CÃ¡mara de MeditaciÃ³n     â”‚ meditation         â”‚ MENTAL         â”‚ aura_lvl        â•‘
â•‘  BitÃ¡cora de Guerra       â”‚ journal            â”‚ PRODUCTIVIDAD  â”‚ wealth_lvl      â•‘
â•‘  Vitalidad Sexual         â”‚ kegel              â”‚ CARA           â”‚ face_lvl        â•‘
â•‘  Escultor Facial          â”‚ facial             â”‚ CARA           â”‚ face_lvl        â•‘
â•‘  Crea tu Hipnosis         â”‚ (auxiliar premium) â”‚ MENTAL         â”‚ aura_lvl        â•‘
â•‘  Movilidad TÃ¡ctica        â”‚ posture            â”‚ CARA           â”‚ face_lvl        â•‘
â•‘  Focus Chamber            â”‚ focus_work         â”‚ PRODUCTIVIDAD  â”‚ wealth_lvl      â•‘
â•‘                                                                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SUBCAJA 07.1: Arquitectura del Arsenal
Estructura Compartida de Herramientas
Archivos a Crear
CopyRutas:
â”œâ”€â”€ /src/app/(dashboard)/tools/layout.tsx
â”œâ”€â”€ /src/app/(dashboard)/tools/page.tsx
â”œâ”€â”€ /src/components/tools/ToolCard.tsx
â”œâ”€â”€ /src/components/tools/ToolHeader.tsx
â”œâ”€â”€ /src/components/tools/ToolProgress.tsx
â”œâ”€â”€ /src/components/tools/ToolTimer.tsx
â”œâ”€â”€ /src/components/tools/ToolAudioPlayer.tsx
â”œâ”€â”€ /src/components/tools/ToolVideoPlayer.tsx
â”œâ”€â”€ /src/lib/tools/types.ts
â”œâ”€â”€ /src/lib/tools/constants.ts
â”œâ”€â”€ /src/lib/tools/hooks/useToolSession.ts
â”œâ”€â”€ /src/lib/tools/hooks/useToolProgress.ts
â”œâ”€â”€ /src/lib/tools/hooks/useToolTimer.ts
â”œâ”€â”€ /src/actions/tools/saveProgress.ts
â”œâ”€â”€ /src/actions/tools/completeSession.ts

Tiempo de GeneraciÃ³n: 30-45 minutos
Estructura del MÃ³dulo
Copy07.1 Arquitectura del Arsenal
â”‚
â”œâ”€â”€ 1. TIPOS COMPARTIDOS (/lib/tools/types.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.1 ToolType (enum)
â”‚   â”‚   â”œâ”€â”€ 'library'      // Biblioteca de Poder
â”‚   â”‚   â”œâ”€â”€ 'gym'          // Templo del Hierro
â”‚   â”‚   â”œâ”€â”€ 'meditation'   // CÃ¡mara de MeditaciÃ³n
â”‚   â”‚   â”œâ”€â”€ 'journal'      // BitÃ¡cora de Guerra
â”‚   â”‚   â”œâ”€â”€ 'kegel'        // Vitalidad Sexual
â”‚   â”‚   â”œâ”€â”€ 'facial'       // Escultor Facial
â”‚   â”‚   â”œâ”€â”€ 'hypnosis'     // Crea tu Hipnosis
â”‚   â”‚   â”œâ”€â”€ 'stretching'   // Movilidad TÃ¡ctica
â”‚   â”‚   â””â”€â”€ 'focus'        // Focus Chamber
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.2 ToolSession
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ toolType: ToolType
â”‚   â”‚   â”œâ”€â”€ startedAt: Date
â”‚   â”‚   â”œâ”€â”€ completedAt: Date | null
â”‚   â”‚   â”œâ”€â”€ durationSeconds: number
â”‚   â”‚   â”œâ”€â”€ metadata: Record<string, unknown>
â”‚   â”‚   â””â”€â”€ status: 'active' | 'completed' | 'abandoned'
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.3 ToolProgress
â”‚   â”‚   â”œâ”€â”€ userId: string
â”‚   â”‚   â”œâ”€â”€ toolType: ToolType
â”‚   â”‚   â”œâ”€â”€ itemId: string | null
â”‚   â”‚   â”œâ”€â”€ progressPercent: number
â”‚   â”‚   â”œâ”€â”€ currentPosition: number
â”‚   â”‚   â”œâ”€â”€ totalDuration: number
â”‚   â”‚   â””â”€â”€ lastAccessedAt: Date
â”‚   â”‚
â”‚   â””â”€â”€ 1.4 ToolCompletionResult
â”‚       â”œâ”€â”€ success: boolean
â”‚       â”œâ”€â”€ taskId: string | null
â”‚       â”œâ”€â”€ btcEarned: number
â”‚       â””â”€â”€ vectorsUpdated: VectorChange[]
â”‚
â”œâ”€â”€ 2. CONSTANTES (/lib/tools/constants.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ 2.1 TOOL_CONFIG
â”‚   â”‚   â””â”€â”€ [ConfiguraciÃ³n por herramienta]
â”‚   â”‚
â”‚   â”œâ”€â”€ 2.2 TOOL_ROUTES
â”‚   â”‚   â”œâ”€â”€ library: '/tools/library'
â”‚   â”‚   â”œâ”€â”€ gym: '/tools/gym'
â”‚   â”‚   â”œâ”€â”€ meditation: '/tools/meditation'
â”‚   â”‚   â”œâ”€â”€ journal: '/tools/journal'
â”‚   â”‚   â”œâ”€â”€ kegel: '/tools/kegel'
â”‚   â”‚   â”œâ”€â”€ facial: '/tools/facial'
â”‚   â”‚   â”œâ”€â”€ hypnosis: '/tools/hypnosis'
â”‚   â”‚   â”œâ”€â”€ stretching: '/tools/stretching'
â”‚   â”‚   â””â”€â”€ focus: '/tools/focus'
â”‚   â”‚
â”‚   â””â”€â”€ 2.3 TOOL_ICONS
â”‚       â””â”€â”€ [Mapeo de iconos Lucide por herramienta]
â”‚
â”œâ”€â”€ 3. HOOKS COMPARTIDOS
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.1 useToolSession
â”‚   â”‚   â”œâ”€â”€ startSession(toolType, metadata)
â”‚   â”‚   â”œâ”€â”€ endSession(completed: boolean)
â”‚   â”‚   â”œâ”€â”€ getActiveSession()
â”‚   â”‚   â””â”€â”€ sessionDuration (computed)
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.2 useToolProgress
â”‚   â”‚   â”œâ”€â”€ loadProgress(toolType, itemId)
â”‚   â”‚   â”œâ”€â”€ saveProgress(progressData)
â”‚   â”‚   â”œâ”€â”€ progress (state)
â”‚   â”‚   â””â”€â”€ isLoading (state)
â”‚   â”‚
â”‚   â””â”€â”€ 3.3 useToolTimer
â”‚       â”œâ”€â”€ start()
â”‚       â”œâ”€â”€ pause()
â”‚       â”œâ”€â”€ reset()
â”‚       â”œâ”€â”€ elapsed (state)
â”‚       â”œâ”€â”€ isRunning (state)
â”‚       â””â”€â”€ formatTime(seconds)
â”‚
â”œâ”€â”€ 4. COMPONENTES COMPARTIDOS
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.1 ToolCard
â”‚   â”‚   â”œâ”€â”€ Props: { tool: ToolConfig, onClick }
â”‚   â”‚   â”œâ”€â”€ Muestra: Icono, nombre, descripciÃ³n, estado
â”‚   â”‚   â””â”€â”€ Estilo: Card con hover effect
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.2 ToolHeader
â”‚   â”‚   â”œâ”€â”€ Props: { title, subtitle, backUrl }
â”‚   â”‚   â”œâ”€â”€ Muestra: TÃ­tulo, botÃ³n volver
â”‚   â”‚   â””â”€â”€ Estilo: Header fijo
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.3 ToolProgress
â”‚   â”‚   â”œâ”€â”€ Props: { current, total, label }
â”‚   â”‚   â”œâ”€â”€ Muestra: Barra de progreso con %
â”‚   â”‚   â””â”€â”€ Estilo: Barra horizontal con glow
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.4 ToolTimer
â”‚   â”‚   â”œâ”€â”€ Props: { duration?, onComplete, autoStart }
â”‚   â”‚   â”œâ”€â”€ Modes: countdown | stopwatch
â”‚   â”‚   â”œâ”€â”€ Muestra: Tiempo en formato MM:SS
â”‚   â”‚   â””â”€â”€ Estilo: CÃ­rculo animado
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.5 ToolAudioPlayer
â”‚   â”‚   â”œâ”€â”€ Props: { src, onProgress, onComplete }
â”‚   â”‚   â”œâ”€â”€ Features: Play/Pause, seek, volume
â”‚   â”‚   â””â”€â”€ Estilo: Reproductor minimalista
â”‚   â”‚
â”‚   â””â”€â”€ 4.6 ToolVideoPlayer
â”‚       â”œâ”€â”€ Props: { src, onProgress, onComplete }
â”‚       â”œâ”€â”€ Features: Play/Pause, fullscreen
â”‚       â””â”€â”€ Estilo: Video con controles overlay
â”‚
â”œâ”€â”€ 5. SERVER ACTIONS COMPARTIDAS
â”‚   â”‚
â”‚   â”œâ”€â”€ 5.1 saveToolProgress
â”‚   â”‚   â”œâ”€â”€ Input: { toolType, itemId?, progress }
â”‚   â”‚   â”œâ”€â”€ Action: Upsert en tool_progress
â”‚   â”‚   â””â”€â”€ Output: { success, progress }
â”‚   â”‚
â”‚   â””â”€â”€ 5.2 completeToolSession
â”‚       â”œâ”€â”€ Input: { toolType, sessionData }
â”‚       â”œâ”€â”€ Action:
â”‚       â”‚   â”œâ”€â”€ 1. Validar sesiÃ³n mÃ­nima
â”‚       â”‚   â”œâ”€â”€ 2. Buscar tarea asociada pendiente
â”‚       â”‚   â”œâ”€â”€ 3. Si existe, marcar completada
â”‚       â”‚   â”œâ”€â”€ 4. Otorgar BTC
â”‚       â”‚   â””â”€â”€ 5. Actualizar vectores
â”‚       â””â”€â”€ Output: ToolCompletionResult
â”‚
â””â”€â”€ 6. PÃGINA ÃNDICE DEL ARSENAL
    â”‚
    â”œâ”€â”€ 6.1 Layout (/tools/layout.tsx)
    â”‚   â””â”€â”€ Container con sidebar de herramientas
    â”‚
    â””â”€â”€ 6.2 PÃ¡gina Principal (/tools/page.tsx)
        â”œâ”€â”€ Grid de ToolCards
        â””â”€â”€ Acceso rÃ¡pido a cada herramienta
Tareas AtÃ³micas para 07.1 Arquitectura
yamlCopyTAREA-07.1.1:
  Nombre: "Crear tipos compartidos de herramientas"
  AcciÃ³n: "Crear /src/lib/tools/types.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el archivo /src/lib/tools/types.ts con:
    
    1. Enum ToolType con las 9 herramientas:
       'library', 'gym', 'meditation', 'journal', 'kegel', 
       'facial', 'hypnosis', 'stretching', 'focus'
    
    2. Interface ToolSession:
       - id: string
       - toolType: ToolType
       - startedAt: Date
       - completedAt: Date | null
       - durationSeconds: number
       - metadata: Record<string, unknown>
       - status: 'active' | 'completed' | 'abandoned'
    
    3. Interface ToolProgress:
       - userId: string
       - toolType: ToolType
       - itemId: string | null
       - progressPercent: number (0-100)
       - currentPosition: number
       - totalDuration: number
       - lastAccessedAt: Date
    
    4. Interface ToolCompletionResult:
       - success: boolean
       - taskId: string | null
       - btcEarned: number
       - vectorsUpdated: { vector: string, change: number }[]
    
    5. Interface ToolConfig:
       - type: ToolType
       - name: string
       - description: string
       - icon: string (nombre de icono Lucide)
       - route: string
       - archetype: 'mental' | 'cara' | 'productividad' | 'fisico'
       - vector: 'aura_lvl' | 'face_lvl' | 'wealth_lvl' | 'muscle_lvl' | 'fat_lvl'
       - isPremium: boolean
       - minDurationSeconds: number (para validar completado)
    
    Usar TypeScript estricto, exportar todos los tipos.

TAREA-07.1.2:
  Nombre: "Crear constantes de herramientas"
  AcciÃ³n: "Crear /src/lib/tools/constants.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea /src/lib/tools/constants.ts con:
    
    1. TOOL_CONFIG: Record<ToolType, ToolConfig>
       Incluir todas las 9 herramientas con su configuraciÃ³n:
       
       - library: {
           name: "Biblioteca de Poder",
           description: "Conocimiento que transforma",
           icon: "BookOpen",
           route: "/tools/library",
           archetype: "mental",
           vector: "aura_lvl",
           isPremium: false,
           minDurationSeconds: 900 // 15 min
         }
       
       - gym: {
           name: "Templo del Hierro",
           description: "Forja tu fÃ­sico",
           icon: "Dumbbell",
           route: "/tools/gym",
           archetype: "fisico",
           vector: "muscle_lvl",
           isPremium: false,
           minDurationSeconds: 1800 // 30 min
         }
       
       [Continuar con las 7 restantes siguiendo el patrÃ³n del cuestionario1]
    
    2. TOOL_ROUTES: Record<ToolType, string>
    
    3. TOOL_ICONS: Record<ToolType, LucideIcon>
    
    4. TOOL_COMPLETION_THRESHOLDS: Record<ToolType, number>
       // % mÃ­nimo para considerar completada (ej: 90 para audio)

TAREA-07.1.3:
  Nombre: "Crear hook useToolSession"
  AcciÃ³n: "Crear /src/lib/tools/hooks/useToolSession.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el hook useToolSession que:
    
    1. Mantiene estado de sesiÃ³n activa en memoria
    2. Guarda en localStorage para persistencia
    3. Expone:
       - startSession(toolType: ToolType, metadata?: Record<string, unknown>)
       - endSession(completed: boolean): Promise<ToolCompletionResult | null>
       - getActiveSession(): ToolSession | null
       - sessionDuration: number (segundos transcurridos)
       - isSessionActive: boolean
    
    4. useEffect para calcular duraciÃ³n cada segundo cuando hay sesiÃ³n activa
    
    5. Cleanup al desmontar componente
    
    Usar Zustand para el estado si es necesario para compartir entre componentes.

TAREA-07.1.4:
  Nombre: "Crear hook useToolProgress"
  AcciÃ³n: "Crear /src/lib/tools/hooks/useToolProgress.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el hook useToolProgress que:
    
    1. Carga progreso desde la DB via Server Action
    2. Guarda progreso con debounce (cada 5 segundos max)
    3. Expone:
       - loadProgress(toolType: ToolType, itemId?: string): Promise<void>
       - updateProgress(progressPercent: number, currentPosition: number): void
       - saveProgress(): Promise<void> (manual save)
       - progress: ToolProgress | null
       - isLoading: boolean
       - isSaving: boolean
    
    4. Auto-save al desmontar si hay cambios pendientes

TAREA-07.1.5:
  Nombre: "Crear hook useToolTimer"
  AcciÃ³n: "Crear /src/lib/tools/hooks/useToolTimer.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el hook useToolTimer que:
    
    1. Soporta dos modos:
       - 'countdown': Cuenta regresiva desde duration hasta 0
       - 'stopwatch': Cuenta desde 0 hacia arriba
    
    2. Expone:
       - start(): void
       - pause(): void
       - reset(): void
       - setDuration(seconds: number): void (solo countdown)
       - elapsed: number (segundos)
       - remaining: number (solo countdown)
       - isRunning: boolean
       - isComplete: boolean (countdown llegÃ³ a 0)
       - progress: number (0-100, para countdown)
    
    3. Callbacks:
       - onTick?: (elapsed: number) => void
       - onComplete?: () => void
    
    4. Usa requestAnimationFrame o setInterval eficiente

TAREA-07.1.6:
  Nombre: "Crear componente ToolCard"
  AcciÃ³n: "Crear /src/components/tools/ToolCard.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente ToolCard:
    
    Props:
    - tool: ToolConfig
    - onClick: () => void
    - disabled?: boolean
    - showProgress?: boolean
    - progress?: number (0-100)
    
    Estructura:
    - Card con bg-secondary, border sutil
    - Icono grande (48px) con color segÃºn archetype
    - Nombre en texto grande
    - DescripciÃ³n en texto secundario
    - Badge "PREMIUM" si isPremium
    - Barra de progreso opcional en la parte inferior
    
    Estados:
    - Default: Opacidad 100%
    - Hover: Scale 1.02, border glow
    - Disabled: Opacidad 50%, cursor not-allowed
    
    Usar Framer Motion para animaciones.

TAREA-07.1.7:
  Nombre: "Crear componente ToolHeader"
  AcciÃ³n: "Crear /src/components/tools/ToolHeader.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente ToolHeader:
    
    Props:
    - title: string
    - subtitle?: string
    - backUrl?: string (default: '/tools')
    - rightContent?: ReactNode
    
    Estructura:
    - Sticky top, z-index alto
    - BotÃ³n de volver (ChevronLeft)
    - TÃ­tulo centrado o a la izquierda
    - SubtÃ­tulo debajo del tÃ­tulo
    - Ãrea derecha para contenido adicional
    
    Estilo:
    - Background con glassmorphism
    - Padding responsive
    - Border bottom sutil

TAREA-07.1.8:
  Nombre: "Crear componente ToolProgress"
  AcciÃ³n: "Crear /src/components/tools/ToolProgress.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente ToolProgress:
    
    Props:
    - current: number
    - total: number
    - label?: string
    - showPercentage?: boolean (default true)
    - color?: 'default' | 'gold' | 'green' | 'red'
    - size?: 'sm' | 'md' | 'lg'
    
    Estructura:
    - Label opcional arriba
    - Barra de progreso con animaciÃ³n smooth
    - Porcentaje a la derecha
    
    Estilo:
    - Background track oscuro
    - Fill con gradiente segÃºn color
    - Glow effect en el fill
    - Altura segÃºn size (4px, 8px, 12px)

TAREA-07.1.9:
  Nombre: "Crear componente ToolTimer"
  AcciÃ³n: "Crear /src/components/tools/ToolTimer.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente ToolTimer:
    
    Props:
    - mode: 'countdown' | 'stopwatch'
    - duration?: number (requerido si countdown)
    - autoStart?: boolean
    - onComplete?: () => void
    - onTick?: (elapsed: number) => void
    - size?: 'sm' | 'md' | 'lg' (diÃ¡metro del cÃ­rculo)
    - showControls?: boolean
    
    Estructura:
    - CÃ­rculo SVG con progress ring
    - Tiempo en el centro (MM:SS o HH:MM:SS)
    - Controles debajo: Play/Pause, Reset
    
    Estilo:
    - CÃ­rculo con stroke animado
    - Color cambia segÃºn progreso (verde â†’ amarillo â†’ rojo en countdown)
    - Pulse animation cuando estÃ¡ corriendo
    - VibraciÃ³n cuando completa (si soportado)
    
    Usar el hook useToolTimer internamente.

TAREA-07.1.10:
  Nombre: "Crear componente ToolAudioPlayer"
  AcciÃ³n: "Crear /src/components/tools/ToolAudioPlayer.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente ToolAudioPlayer:
    
    Props:
    - src: string
    - title?: string
    - onProgress?: (percent: number, currentTime: number) => void
    - onComplete?: () => void
    - initialProgress?: number (segundos, para resume)
    - preventSkip?: boolean (no permite adelantar)
    
    Estructura:
    - Visualizador de ondas o barra de progreso
    - BotÃ³n Play/Pause grande centrado
    - Tiempo actual / Tiempo total
    - Barra de progreso clickeable (si !preventSkip)
    - Control de volumen
    
    Estilo:
    - Fondo oscuro
    - BotÃ³n con glow
    - Barra de progreso con gradient
    
    Funcionalidad:
    - Usa <audio> nativo
    - Guarda progreso cada 5 segundos
    - Resume desde initialProgress
    - Detecta 90% completado para onComplete

TAREA-07.1.11:
  Nombre: "Crear componente ToolVideoPlayer"
  AcciÃ³n: "Crear /src/components/tools/ToolVideoPlayer.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente ToolVideoPlayer:
    
    Props:
    - src: string
    - poster?: string
    - onProgress?: (percent: number, currentTime: number) => void
    - onComplete?: () => void
    - loop?: boolean (para ejercicios en loop)
    - autoPlay?: boolean
    
    Estructura:
    - Video con aspect ratio 16:9
    - Controles overlay que aparecen al hover/tap
    - Play/Pause central grande
    - Barra de progreso en la parte inferior
    - BotÃ³n fullscreen
    
    Estilo:
    - Esquinas redondeadas
    - Controles con glassmorphism
    - TransiciÃ³n suave de controles

TAREA-07.1.12:
  Nombre: "Crear Server Action saveToolProgress"
  AcciÃ³n: "Crear /src/actions/tools/saveProgress.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la Server Action saveToolProgress:
    
    'use server'
    
    Input (con Zod):
    - toolType: ToolType
    - itemId: string | null
    - progressPercent: number (0-100)
    - currentPosition: number
    - totalDuration: number
    
    Proceso:
    1. Verificar autenticaciÃ³n
    2. Validar input con Zod
    3. Upsert en tabla tool_progress:
       - Si existe registro con mismo user_id + toolType + itemId: UPDATE
       - Si no existe: INSERT
    4. Retornar progreso actualizado
    
    Output:
    - { success: true, progress: ToolProgress }
    - { success: false, error: string }

TAREA-07.1.13:
  Nombre: "Crear Server Action completeToolSession"
  AcciÃ³n: "Crear /src/actions/tools/completeSession.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la Server Action completeToolSession:
    
    'use server'
    
    Input (con Zod):
    - toolType: ToolType
    - durationSeconds: number
    - metadata: Record<string, unknown> (opcional)
    
    Proceso:
    1. Verificar autenticaciÃ³n
    2. Validar que durationSeconds >= minDurationSeconds del tool
    3. Buscar tarea pendiente del dÃ­a actual que coincida:
       - Mapeo toolType â†’ task_category:
         'library' â†’ 'reading'
         'gym' â†’ 'strength' o 'cardio' (segÃºn metadata)
         'meditation' â†’ 'meditation'
         'journal' â†’ 'journal'
         'kegel' â†’ 'kegel'
         'facial' â†’ 'facial'
         'stretching' â†’ 'posture'
         'focus' â†’ 'focus_work'
    4. Si hay tarea pendiente:
       - Llamar a completeTask (reutilizar)
       - Retornar btcEarned y vectorsUpdated
    5. Si no hay tarea (ya completada o fuera de horario):
       - Registrar sesiÃ³n igualmente
       - Retornar success pero sin rewards
    
    Output: ToolCompletionResult

TAREA-07.1.14:
  Nombre: "Crear layout del Arsenal"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/layout.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el layout para /tools:
    
    - Container principal con padding responsive
    - NO incluir sidebar aquÃ­ (ya estÃ¡ en dashboard layout)
    - Slot para children
    - Fondo consistente con el resto del dashboard

TAREA-07.1.15:
  Nombre: "Crear pÃ¡gina Ã­ndice del Arsenal"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina principal /tools:
    
    Estructura:
    1. TÃ­tulo "ARSENAL" con estilo militar
    2. SubtÃ­tulo "Elige tu arma de transformaciÃ³n"
    3. Grid de ToolCards (3 columnas desktop, 2 tablet, 1 mobile)
    4. Ordenar por arquetipo:
       - SecciÃ³n MENTAL: Biblioteca, MeditaciÃ³n
       - SecciÃ³n CARA: Facial, Kegel, Postura
       - SecciÃ³n PRODUCTIVIDAD: Journal, Focus
       - SecciÃ³n FÃSICO: Gym
       - SecciÃ³n PREMIUM: Hipnosis
    
    Funcionalidad:
    - Cada card navega a su ruta
    - Mostrar progreso si hay sesiÃ³n en curso
    - Badge "En progreso" si hay sesiÃ³n activa
    
    Estilo:
    - Headers de secciÃ³n con lÃ­nea decorativa
    - AnimaciÃ³n stagger al cargar cards

SUBCAJA 07.2: Biblioteca de Poder (Lectura)
Herramienta de Lectura Gamificada
Archivos a Crear
CopyRutas:
â”œâ”€â”€ /src/app/(dashboard)/tools/library/page.tsx
â”œâ”€â”€ /src/app/(dashboard)/tools/library/[bookId]/page.tsx
â”œâ”€â”€ /src/components/tools/library/BookCard.tsx
â”œâ”€â”€ /src/components/tools/library/BookReader.tsx
â”œâ”€â”€ /src/components/tools/library/ReadingTimer.tsx
â”œâ”€â”€ /src/lib/tools/library/books.ts
â”œâ”€â”€ /src/lib/tools/library/types.ts
â”œâ”€â”€ /src/actions/tools/library/getBooks.ts
â”œâ”€â”€ /src/actions/tools/library/getBookProgress.ts
â”œâ”€â”€ /src/actions/tools/library/saveReadingProgress.ts
â”œâ”€â”€ /public/books/[libro].pdf (assets)

Tiempo de GeneraciÃ³n: 45-60 minutos
Estructura del MÃ³dulo
Copy07.2 Biblioteca de Poder
â”‚
â”œâ”€â”€ 1. TIPOS ESPECÃFICOS (/lib/tools/library/types.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.1 Book
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ title: string
â”‚   â”‚   â”œâ”€â”€ author: string
â”‚   â”‚   â”œâ”€â”€ description: string
â”‚   â”‚   â”œâ”€â”€ coverUrl: string
â”‚   â”‚   â”œâ”€â”€ pdfUrl: string
â”‚   â”‚   â”œâ”€â”€ totalPages: number
â”‚   â”‚   â”œâ”€â”€ category: 'stoicism' | 'finance' | 'productivity' | 'psychology'
â”‚   â”‚   â””â”€â”€ difficulty: 'beginner' | 'intermediate' | 'advanced'
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.2 ReadingProgress
â”‚   â”‚   â”œâ”€â”€ bookId: string
â”‚   â”‚   â”œâ”€â”€ currentPage: number
â”‚   â”‚   â”œâ”€â”€ totalPages: number
â”‚   â”‚   â”œâ”€â”€ percentComplete: number
â”‚   â”‚   â”œâ”€â”€ totalReadingTime: number (segundos)
â”‚   â”‚   â”œâ”€â”€ lastReadAt: Date
â”‚   â”‚   â””â”€â”€ isComplete: boolean
â”‚   â”‚
â”‚   â””â”€â”€ 1.3 ReadingSession
â”‚       â”œâ”€â”€ startPage: number
â”‚       â”œâ”€â”€ endPage: number
â”‚       â”œâ”€â”€ durationSeconds: number
â”‚       â””â”€â”€ pagesRead: number
â”‚
â”œâ”€â”€ 2. CATÃLOGO DE LIBROS (/lib/tools/library/books.ts)
â”‚   â”‚
â”‚   â””â”€â”€ BOOK_CATALOG: Book[]
â”‚       â”œâ”€â”€ "Meditaciones" - Marco Aurelio
â”‚       â”œâ”€â”€ "El Hombre en Busca de Sentido" - Viktor Frankl
â”‚       â”œâ”€â”€ "Padre Rico, Padre Pobre" - Robert Kiyosaki
â”‚       â”œâ”€â”€ "El Arte de la Guerra" - Sun Tzu
â”‚       â”œâ”€â”€ "Atomic Habits" - James Clear
â”‚       â”œâ”€â”€ "Los 7 HÃ¡bitos de la Gente Altamente Efectiva"
â”‚       â”œâ”€â”€ "Piense y HÃ¡gase Rico" - Napoleon Hill
â”‚       â”œâ”€â”€ "El Poder del Ahora" - Eckhart Tolle
â”‚       â”œâ”€â”€ "CÃ³mo Ganar Amigos" - Dale Carnegie
â”‚       â””â”€â”€ "The Rational Male" - Rollo Tomassi
â”‚
â”œâ”€â”€ 3. COMPONENTES
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.1 BookCard
â”‚   â”‚   â”œâ”€â”€ Props: { book, progress?, onClick }
â”‚   â”‚   â”œâ”€â”€ Muestra: Cover, tÃ­tulo, autor, progreso
â”‚   â”‚   â””â”€â”€ Estilo: Card vertical con cover prominente
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.2 BookReader
â”‚   â”‚   â”œâ”€â”€ Props: { book, initialPage, onPageChange, onSessionEnd }
â”‚   â”‚   â”œâ”€â”€ Usa: react-pdf o pdf.js
â”‚   â”‚   â”œâ”€â”€ Features:
â”‚   â”‚   â”‚   â”œâ”€â”€ NavegaciÃ³n por pÃ¡ginas
â”‚   â”‚   â”‚   â”œâ”€â”€ Zoom
â”‚   â”‚   â”‚   â”œâ”€â”€ Modo noche
â”‚   â”‚   â”‚   â””â”€â”€ Bookmarks
â”‚   â”‚   â””â”€â”€ Estilo: Lector full-height
â”‚   â”‚
â”‚   â””â”€â”€ 3.3 ReadingTimer
â”‚       â”œâ”€â”€ Props: { minMinutes, onComplete }
â”‚       â”œâ”€â”€ Muestra: Timer de sesiÃ³n de lectura
â”‚       â””â”€â”€ Valida: MÃ­nimo 15 min para completar tarea
â”‚
â”œâ”€â”€ 4. PÃGINAS
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.1 PÃ¡gina de Biblioteca (/tools/library)
â”‚   â”‚   â”œâ”€â”€ Header con tÃ­tulo
â”‚   â”‚   â”œâ”€â”€ Filtros por categorÃ­a
â”‚   â”‚   â”œâ”€â”€ Grid de BookCards
â”‚   â”‚   â””â”€â”€ SecciÃ³n "Continuar leyendo"
â”‚   â”‚
â”‚   â””â”€â”€ 4.2 PÃ¡gina de Lector (/tools/library/[bookId])
â”‚       â”œâ”€â”€ ToolHeader con tÃ­tulo del libro
â”‚       â”œâ”€â”€ BookReader full-height
â”‚       â”œâ”€â”€ Timer flotante
â”‚       â””â”€â”€ BotÃ³n "Terminar sesiÃ³n"
â”‚
â”œâ”€â”€ 5. SERVER ACTIONS
â”‚   â”‚
â”‚   â”œâ”€â”€ 5.1 getBooks
â”‚   â”‚   â””â”€â”€ Retorna catÃ¡logo + progreso del usuario
â”‚   â”‚
â”‚   â”œâ”€â”€ 5.2 getBookProgress
â”‚   â”‚   â””â”€â”€ Retorna progreso especÃ­fico de un libro
â”‚   â”‚
â”‚   â””â”€â”€ 5.3 saveReadingProgress
â”‚       â”œâ”€â”€ Input: bookId, currentPage, sessionDuration
â”‚       â”œâ”€â”€ Actualiza: tool_progress
â”‚       â””â”€â”€ Si sessionDuration >= 900s: Completa tarea
â”‚
â””â”€â”€ 6. LÃ“GICA DE VALIDACIÃ“N
    â”‚
    â”œâ”€â”€ 6.1 Criterio de Completado
    â”‚   â””â”€â”€ 15 minutos de lectura O 15 pÃ¡ginas avanzadas
    â”‚
    â”œâ”€â”€ 6.2 Anti-skip
    â”‚   â””â”€â”€ Timer corre mientras el documento estÃ¡ visible
    â”‚
    â””â”€â”€ 6.3 Persistencia
        â””â”€â”€ Guarda pÃ¡gina cada cambio, tiempo cada 30s
Tareas AtÃ³micas para 07.2 Biblioteca
yamlCopyTAREA-07.2.1:
  Nombre: "Crear tipos de Biblioteca"
  AcciÃ³n: "Crear /src/lib/tools/library/types.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea los tipos para la Biblioteca:
    
    1. Interface Book:
       - id: string
       - title: string
       - author: string
       - description: string
       - coverUrl: string
       - pdfUrl: string
       - totalPages: number
       - category: 'stoicism' | 'finance' | 'productivity' | 'psychology'
       - difficulty: 'beginner' | 'intermediate' | 'advanced'
    
    2. Interface ReadingProgress:
       - bookId: string
       - currentPage: number
       - totalPages: number
       - percentComplete: number
       - totalReadingTimeSeconds: number
       - lastReadAt: Date
       - isComplete: boolean
    
    3. Interface ReadingSession:
       - startPage: number
       - endPage: number
       - durationSeconds: number
       - pagesRead: number
    
    4. Interface BookWithProgress:
       - Extends Book
       - progress: ReadingProgress | null

TAREA-07.2.2:
  Nombre: "Crear catÃ¡logo de libros"
  AcciÃ³n: "Crear /src/lib/tools/library/books.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el catÃ¡logo de libros inicial:
    
    export const BOOK_CATALOG: Book[] = [
      {
        id: 'meditaciones',
        title: 'Meditaciones',
        author: 'Marco Aurelio',
        description: 'Reflexiones estoicas del emperador romano',
        coverUrl: '/books/covers/meditaciones.jpg',
        pdfUrl: '/books/pdf/meditaciones.pdf',
        totalPages: 120,
        category: 'stoicism',
        difficulty: 'intermediate'
      },
      // ... 9 libros mÃ¡s segÃºn cuestionario1
    ];
    
    Incluir los 10 libros mencionados en el cuestionario.
    
    TambiÃ©n exportar:
    - BOOK_CATEGORIES con nombres legibles
    - getBookById(id: string): Book | undefined
    - getBooksByCategory(category: string): Book[]

TAREA-07.2.3:
  Nombre: "Crear componente BookCard"
  AcciÃ³n: "Crear /src/components/tools/library/BookCard.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente BookCard:
    
    Props:
    - book: Book
    - progress?: ReadingProgress
    - onClick: () => void
    
    Estructura:
    - Cover del libro (imagen, fallback si no existe)
    - TÃ­tulo (max 2 lÃ­neas, truncate)
    - Autor
    - Badge de categorÃ­a
    - Barra de progreso si progress existe
    - "Continuar" si progress > 0 y < 100%
    - "âœ“ Completado" si progress = 100%
    
    Estilo:
    - Card vertical
    - Hover: elevaciÃ³n
    - Cover con aspect ratio de libro (2:3)

TAREA-07.2.4:
  Nombre: "Crear componente BookReader"
  AcciÃ³n: "Crear /src/components/tools/library/BookReader.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente BookReader usando react-pdf:
    
    Props:
    - book: Book
    - initialPage?: number (default 1)
    - onPageChange: (page: number) => void
    - onSessionEnd: (session: ReadingSession) => void
    
    Estructura:
    - Documento PDF renderizado
    - Controles de navegaciÃ³n:
      - Anterior / Siguiente
      - Input de nÃºmero de pÃ¡gina
      - Slider de pÃ¡ginas
    - Controles de vista:
      - Zoom (-, +, fit)
      - Modo noche toggle
    - Indicador de pÃ¡gina actual / total
    
    Funcionalidad:
    - Cargar documento desde pdfUrl
    - Guardar pÃ¡gina inicial al montar (para calcular pÃ¡ginas leÃ­das)
    - Scroll suave entre pÃ¡ginas
    - Responsive (scroll horizontal en mobile)
    
    Estilo:
    - Fondo oscuro para modo noche
    - Controles flotantes semitransparentes

TAREA-07.2.5:
  Nombre: "Crear componente ReadingTimer"
  AcciÃ³n: "Crear /src/components/tools/library/ReadingTimer.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente ReadingTimer:
    
    Props:
    - minMinutes: number (default 15)
    - onComplete: () => void
    - onTick?: (seconds: number) => void
    
    Estructura:
    - Timer circular pequeÃ±o
    - Texto "Tiempo de lectura: MM:SS"
    - Indicador visual cuando se alcanza el mÃ­nimo (brillo verde)
    - BotÃ³n "Completar sesiÃ³n" (habilitado solo si >= minMinutes)
    
    LÃ³gica:
    - Usar useToolTimer en modo 'stopwatch'
    - Pausar si documento no estÃ¡ visible (Page Visibility API)
    - Mostrar notificaciÃ³n cuando se alcanza el mÃ­nimo
    
    Estilo:
    - Flotante en esquina superior derecha
    - Glassmorphism
    - Collapsible (solo icono cuando minimizado)

TAREA-07.2.6:
  Nombre: "Crear Server Action getBooks"
  AcciÃ³n: "Crear /src/actions/tools/library/getBooks.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la Server Action getBooks:
    
    'use server'
    
    Input: ninguno (usa usuario autenticado)
    
    Proceso:
    1. Verificar autenticaciÃ³n
    2. Obtener BOOK_CATALOG
    3. Para cada libro, buscar progreso en tool_progress:
       - WHERE user_id = userId AND toolType = 'library' AND itemId = book.id
    4. Mapear a BookWithProgress[]
    
    Output:
    - { success: true, books: BookWithProgress[] }
    - { success: false, error: string }

TAREA-07.2.7:
  Nombre: "Crear Server Action saveReadingProgress"
  AcciÃ³n: "Crear /src/actions/tools/library/saveReadingProgress.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la Server Action saveReadingProgress:
    
    'use server'
    
    Input (Zod):
    - bookId: string
    - currentPage: number
    - sessionDurationSeconds: number
    - pagesReadInSession: number
    
    Proceso:
    1. Verificar autenticaciÃ³n
    2. Validar input
    3. Obtener progreso existente o crear nuevo
    4. Actualizar:
       - currentPage
       - percentComplete = (currentPage / totalPages) * 100
       - totalReadingTimeSeconds += sessionDurationSeconds
       - lastReadAt = now()
       - isComplete = percentComplete >= 100
    5. Guardar en tool_progress
    6. Si sessionDurationSeconds >= 900 (15 min) O pagesReadInSession >= 15:
       - Llamar a completeToolSession('library', ...)
    
    Output:
    - { success: true, progress: ReadingProgress, taskCompleted: boolean, btcEarned: number }

TAREA-07.2.8:
  Nombre: "Crear pÃ¡gina de Biblioteca"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/library/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/library:
    
    Estructura:
    1. ToolHeader: "BIBLIOTECA DE PODER", "El conocimiento es poder"
    
    2. SecciÃ³n "Continuar leyendo" (si hay libros en progreso):
       - Horizontal scroll de BookCards en progreso
       - Ordenados por lastReadAt DESC
    
    3. Filtros de categorÃ­a:
       - Tabs: Todos | Estoicismo | Finanzas | Productividad | PsicologÃ­a
    
    4. Grid de todos los libros:
       - 4 columnas desktop, 2 mobile
       - BookCards
       - Filtrado por categorÃ­a activa
    
    Funcionalidad:
    - Fetch libros con getBooks()
    - Click en libro â†’ navegar a /tools/library/[bookId]
    
    Loading state:
    - Skeleton cards mientras carga

TAREA-07.2.9:
  Nombre: "Crear pÃ¡gina de Lector"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/library/[bookId]/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/library/[bookId]:
    
    Params: bookId (string)
    
    Estructura:
    1. ToolHeader con tÃ­tulo del libro, botÃ³n volver a biblioteca
    
    2. BookReader (ocupa casi toda la pantalla)
       - initialPage desde progreso guardado
    
    3. ReadingTimer flotante
    
    4. BotÃ³n "Terminar sesiÃ³n" (fixed bottom)
    
    Funcionalidad:
    - Al montar: getBookProgress(bookId), guardar pÃ¡gina inicial
    - onPageChange: debounce â†’ saveReadingProgress parcial
    - onSessionEnd: saveReadingProgress completo
    - Antes de salir: confirmar si hay sesiÃ³n activa > 5 min
    
    Error handling:
    - Si bookId no existe: redirect a /tools/library
    - Si error cargando PDF: mostrar mensaje con retry

SUBCAJA 07.3: Templo del Hierro (Gym)
Herramienta de Entrenamiento de Fuerza
Archivos a Crear
CopyRutas:
â”œâ”€â”€ /src/app/(dashboard)/tools/gym/page.tsx
â”œâ”€â”€ /src/app/(dashboard)/tools/gym/workout/page.tsx
â”œâ”€â”€ /src/app/(dashboard)/tools/gym/exercises/page.tsx
â”œâ”€â”€ /src/components/tools/gym/WorkoutBuilder.tsx
â”œâ”€â”€ /src/components/tools/gym/ExerciseCard.tsx
â”œâ”€â”€ /src/components/tools/gym/ExerciseDetail.tsx
â”œâ”€â”€ /src/components/tools/gym/SetTracker.tsx
â”œâ”€â”€ /src/components/tools/gym/RestTimer.tsx
â”œâ”€â”€ /src/components/tools/gym/WorkoutSummary.tsx
â”œâ”€â”€ /src/lib/tools/gym/exercises.ts
â”œâ”€â”€ /src/lib/tools/gym/routines.ts
â”œâ”€â”€ /src/lib/tools/gym/types.ts
â”œâ”€â”€ /src/actions/tools/gym/saveWorkout.ts
â”œâ”€â”€ /src/actions/tools/gym/getWorkoutHistory.ts

Tiempo de GeneraciÃ³n: 60-75 minutos
Estructura del MÃ³dulo
Copy07.3 Templo del Hierro
â”‚
â”œâ”€â”€ 1. TIPOS ESPECÃFICOS (/lib/tools/gym/types.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.1 MuscleGroup
â”‚   â”‚   â””â”€â”€ 'chest' | 'back' | 'shoulders' | 'biceps' | 'triceps' | 
â”‚   â”‚       'legs' | 'core' | 'cardio'
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.2 Exercise
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ name: string
â”‚   â”‚   â”œâ”€â”€ muscleGroup: MuscleGroup
â”‚   â”‚   â”œâ”€â”€ secondaryMuscles: MuscleGroup[]
â”‚   â”‚   â”œâ”€â”€ equipment: 'barbell' | 'dumbbell' | 'machine' | 'bodyweight' | 'cable'
â”‚   â”‚   â”œâ”€â”€ description: string
â”‚   â”‚   â”œâ”€â”€ gifUrl: string
â”‚   â”‚   â””â”€â”€ tips: string[]
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.3 WorkoutSet
â”‚   â”‚   â”œâ”€â”€ setNumber: number
â”‚   â”‚   â”œâ”€â”€ reps: number
â”‚   â”‚   â”œâ”€â”€ weight: number (kg)
â”‚   â”‚   â”œâ”€â”€ isWarmup: boolean
â”‚   â”‚   â””â”€â”€ isCompleted: boolean
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.4 WorkoutExercise
â”‚   â”‚   â”œâ”€â”€ exerciseId: string
â”‚   â”‚   â”œâ”€â”€ sets: WorkoutSet[]
â”‚   â”‚   â”œâ”€â”€ restSeconds: number
â”‚   â”‚   â””â”€â”€ notes: string
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.5 Workout
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ name: string
â”‚   â”‚   â”œâ”€â”€ exercises: WorkoutExercise[]
â”‚   â”‚   â”œâ”€â”€ startedAt: Date
â”‚   â”‚   â”œâ”€â”€ completedAt: Date | null
â”‚   â”‚   â”œâ”€â”€ totalVolume: number (kg Ã— reps)
â”‚   â”‚   â””â”€â”€ type: 'strength' | 'cardio' | 'mixed'
â”‚   â”‚
â”‚   â””â”€â”€ 1.6 WorkoutTemplate (Rutina predefinida)
â”‚       â”œâ”€â”€ id: string
â”‚       â”œâ”€â”€ name: string
â”‚       â”œâ”€â”€ description: string
â”‚       â”œâ”€â”€ muscleGroups: MuscleGroup[]
â”‚       â”œâ”€â”€ exercises: WorkoutExercise[] (sin completar)
â”‚       â””â”€â”€ estimatedMinutes: number
â”‚
â”œâ”€â”€ 2. CATÃLOGO DE EJERCICIOS (/lib/tools/gym/exercises.ts)
â”‚   â”‚
â”‚   â””â”€â”€ EXERCISE_CATALOG: Exercise[]
â”‚       â”œâ”€â”€ PECHO
â”‚       â”‚   â”œâ”€â”€ bench_press: "Press de Banca"
â”‚       â”‚   â”œâ”€â”€ incline_press: "Press Inclinado"
â”‚       â”‚   â”œâ”€â”€ chest_fly: "Aperturas"
â”‚       â”‚   â””â”€â”€ pushups: "Lagartijas"
â”‚       â”‚
â”‚       â”œâ”€â”€ ESPALDA
â”‚       â”‚   â”œâ”€â”€ deadlift: "Peso Muerto"
â”‚       â”‚   â”œâ”€â”€ barbell_row: "Remo con Barra"
â”‚       â”‚   â”œâ”€â”€ pullups: "Dominadas"
â”‚       â”‚   â””â”€â”€ lat_pulldown: "JalÃ³n al Pecho"
â”‚       â”‚
â”‚       â”œâ”€â”€ PIERNA
â”‚       â”‚   â”œâ”€â”€ squat: "Sentadilla"
â”‚       â”‚   â”œâ”€â”€ leg_press: "Prensa"
â”‚       â”‚   â”œâ”€â”€ lunges: "Desplantes"
â”‚       â”‚   â””â”€â”€ leg_curl: "Curl Femoral"
â”‚       â”‚
â”‚       â”œâ”€â”€ HOMBROS
â”‚       â”‚   â”œâ”€â”€ overhead_press: "Press Militar"
â”‚       â”‚   â”œâ”€â”€ lateral_raise: "Elevaciones Laterales"
â”‚       â”‚   â””â”€â”€ face_pulls: "Face Pulls"
â”‚       â”‚
â”‚       â”œâ”€â”€ BRAZOS
â”‚       â”‚   â”œâ”€â”€ barbell_curl: "Curl con Barra"
â”‚       â”‚   â”œâ”€â”€ tricep_pushdown: "JalÃ³n de TrÃ­ceps"
â”‚       â”‚   â””â”€â”€ hammer_curl: "Curl Martillo"
â”‚       â”‚
â”‚       â””â”€â”€ CARDIO
â”‚           â”œâ”€â”€ treadmill: "Caminadora"
â”‚           â”œâ”€â”€ stationary_bike: "Bicicleta"
â”‚           â””â”€â”€ rowing: "Remo"
â”‚
â”œâ”€â”€ 3. RUTINAS PREDEFINIDAS (/lib/tools/gym/routines.ts)
â”‚   â”‚
â”‚   â””â”€â”€ WORKOUT_TEMPLATES: WorkoutTemplate[]
â”‚       â”œâ”€â”€ push_day: "DÃ­a de Empuje" (Pecho, Hombros, TrÃ­ceps)
â”‚       â”œâ”€â”€ pull_day: "DÃ­a de JalÃ³n" (Espalda, BÃ­ceps)
â”‚       â”œâ”€â”€ leg_day: "DÃ­a de Pierna"
â”‚       â”œâ”€â”€ upper_body: "Tren Superior"
â”‚       â”œâ”€â”€ lower_body: "Tren Inferior"
â”‚       â”œâ”€â”€ full_body: "Cuerpo Completo"
â”‚       â””â”€â”€ hiit_cardio: "HIIT Cardio"
â”‚
â”œâ”€â”€ 4. COMPONENTES
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.1 ExerciseCard
â”‚   â”‚   â”œâ”€â”€ Props: { exercise, onClick, showGif }
â”‚   â”‚   â””â”€â”€ Muestra: Nombre, mÃºsculo, GIF preview
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.2 ExerciseDetail
â”‚   â”‚   â”œâ”€â”€ Props: { exercise, onAddToWorkout }
â”‚   â”‚   â””â”€â”€ Muestra: GIF grande, descripciÃ³n, tips
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.3 WorkoutBuilder
â”‚   â”‚   â”œâ”€â”€ Props: { template?, onStart }
â”‚   â”‚   â”œâ”€â”€ Permite: Agregar/quitar ejercicios, configurar sets
â”‚   â”‚   â””â”€â”€ Output: Workout lista para iniciar
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.4 SetTracker
â”‚   â”‚   â”œâ”€â”€ Props: { exercise, sets, onSetComplete, onUpdateSet }
â”‚   â”‚   â”œâ”€â”€ Muestra: Lista de sets con inputs
â”‚   â”‚   â””â”€â”€ InteracciÃ³n: Marcar set completado
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.5 RestTimer
â”‚   â”‚   â”œâ”€â”€ Props: { seconds, onComplete, onSkip }
â”‚   â”‚   â””â”€â”€ Muestra: Countdown entre sets
â”‚   â”‚
â”‚   â””â”€â”€ 4.6 WorkoutSummary
â”‚       â”œâ”€â”€ Props: { workout }
â”‚       â””â”€â”€ Muestra: Resumen final, volumen total, PR alcanzados
â”‚
â”œâ”€â”€ 5. PÃGINAS
â”‚   â”‚
â”‚   â”œâ”€â”€ 5.1 PÃ¡gina Principal (/tools/gym)
â”‚   â”‚   â”œâ”€â”€ "Iniciar Entrenamiento" button
â”‚   â”‚   â”œâ”€â”€ Rutinas predefinidas
â”‚   â”‚   â”œâ”€â”€ Historial reciente
â”‚   â”‚   â””â”€â”€ PR (Personal Records)
â”‚   â”‚
â”‚   â”œâ”€â”€ 5.2 PÃ¡gina de Workout Activo (/tools/gym/workout)
â”‚   â”‚   â”œâ”€â”€ Lista de ejercicios del workout
â”‚   â”‚   â”œâ”€â”€ SetTracker para ejercicio actual
â”‚   â”‚   â”œâ”€â”€ RestTimer entre sets
â”‚   â”‚   â”œâ”€â”€ BotÃ³n "Siguiente ejercicio"
â”‚   â”‚   â””â”€â”€ BotÃ³n "Terminar entrenamiento"
â”‚   â”‚
â”‚   â””â”€â”€ 5.3 CatÃ¡logo de Ejercicios (/tools/gym/exercises)
â”‚       â”œâ”€â”€ Filtros por mÃºsculo
â”‚       â”œâ”€â”€ Grid de ExerciseCards
â”‚       â””â”€â”€ ExerciseDetail en modal
â”‚
â”œâ”€â”€ 6. SERVER ACTIONS
â”‚   â”‚
â”‚   â”œâ”€â”€ 6.1 saveWorkout
â”‚   â”‚   â”œâ”€â”€ Input: Workout completo
â”‚   â”‚   â”œâ”€â”€ Guarda en workout_logs
â”‚   â”‚   â”œâ”€â”€ Calcula volumen total
â”‚   â”‚   â”œâ”€â”€ Detecta PRs
â”‚   â”‚   â””â”€â”€ Completa tarea 'strength' o 'cardio'
â”‚   â”‚
â”‚   â””â”€â”€ 6.2 getWorkoutHistory
â”‚       â””â”€â”€ Retorna Ãºltimos workouts del usuario
â”‚
â””â”€â”€ 7. LÃ“GICA DE VALIDACIÃ“N
    â”‚
    â”œâ”€â”€ 7.1 Criterio de Completado para 'strength'
    â”‚   â””â”€â”€ MÃ­nimo 3 ejercicios con 3+ sets completados
    â”‚
    â”œâ”€â”€ 7.2 Criterio de Completado para 'cardio'
    â”‚   â””â”€â”€ MÃ­nimo 20 minutos de ejercicio cardiovascular
    â”‚
    â””â”€â”€ 7.3 Vector afectado
        â”œâ”€â”€ strength â†’ muscle_lvl +0.05
        â””â”€â”€ cardio â†’ fat_lvl -0.05
Tareas AtÃ³micas para 07.3 Templo del Hierro
yamlCopyTAREA-07.3.1:
  Nombre: "Crear tipos del Gym"
  AcciÃ³n: "Crear /src/lib/tools/gym/types.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea los tipos para el Templo del Hierro:
    
    1. Type MuscleGroup = 'chest' | 'back' | 'shoulders' | 'biceps' | 
       'triceps' | 'legs' | 'core' | 'cardio'
    
    2. Interface Exercise con:
       - id, name, muscleGroup, secondaryMuscles[]
       - equipment: 'barbell' | 'dumbbell' | 'machine' | 'bodyweight' | 'cable'
       - description, gifUrl, tips[]
    
    3. Interface WorkoutSet:
       - setNumber, reps, weight (kg), isWarmup, isCompleted
    
    4. Interface WorkoutExercise:
       - exerciseId, sets: WorkoutSet[], restSeconds, notes
    
    5. Interface Workout:
       - id, name, exercises[], startedAt, completedAt
       - totalVolume (kg Ã— reps), type: 'strength' | 'cardio' | 'mixed'
    
    6. Interface WorkoutTemplate:
       - id, name, description, muscleGroups[], exercises[], estimatedMinutes
    
    7. Interface PersonalRecord:
       - exerciseId, weight, reps, achievedAt

TAREA-07.3.2:
  Nombre: "Crear catÃ¡logo de ejercicios"
  AcciÃ³n: "Crear /src/lib/tools/gym/exercises.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el catÃ¡logo de ejercicios con al menos 20 ejercicios:
    
    PECHO (4):
    - bench_press, incline_press, chest_fly, pushups
    
    ESPALDA (4):
    - deadlift, barbell_row, pullups, lat_pulldown
    
    PIERNA (4):
    - squat, leg_press, lunges, leg_curl
    
    HOMBROS (3):
    - overhead_press, lateral_raise, face_pulls
    
    BRAZOS (3):
    - barbell_curl, tricep_pushdown, hammer_curl
    
    CARDIO (3):
    - treadmill, stationary_bike, rowing
    
    Para cada ejercicio incluir:
    - DescripciÃ³n en espaÃ±ol
    - gifUrl: '/exercises/[id].gif' (placeholder)
    - Tips de ejecuciÃ³n (2-3)
    
    Exportar tambiÃ©n:
    - getExerciseById(id)
    - getExercisesByMuscle(muscleGroup)

TAREA-07.3.3:
  Nombre: "Crear rutinas predefinidas"
  AcciÃ³n: "Crear /src/lib/tools/gym/routines.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea las rutinas predefinidas:
    
    1. push_day: "DÃ­a de Empuje"
       - Bench Press: 4Ã—8
       - Incline Press: 3Ã—10
       - Overhead Press: 3Ã—10
       - Lateral Raise: 3Ã—12
       - Tricep Pushdown: 3Ã—12
       - Estimado: 45 min
    
    2. pull_day: "DÃ­a de JalÃ³n"
       - Deadlift: 4Ã—6
       - Barbell Row: 4Ã—8
       - Lat Pulldown: 3Ã—10
       - Face Pulls: 3Ã—15
       - Barbell Curl: 3Ã—10
       - Estimado: 50 min
    
    3. leg_day: "DÃ­a de Pierna"
       - Squat: 4Ã—8
       - Leg Press: 3Ã—10
       - Lunges: 3Ã—10 cada pierna
       - Leg Curl: 3Ã—12
       - Estimado: 45 min
    
    4. full_body: "Cuerpo Completo"
       - Squat, Bench, Deadlift, Overhead Press, Barbell Row
       - 3Ã—8 cada uno
       - Estimado: 60 min
    
    5. hiit_cardio: "HIIT Cardio"
       - 20 min de intervalos
       - Estimado: 25 min

TAREA-07.3.4:
  Nombre: "Crear componente ExerciseCard"
  AcciÃ³n: "Crear /src/components/tools/gym/ExerciseCard.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente ExerciseCard:
    
    Props:
    - exercise: Exercise
    - onClick: () => void
    - selected?: boolean
    - showGif?: boolean (default false, hover true)
    
    Estructura:
    - GIF/imagen del ejercicio (aspect 16:9)
    - Nombre del ejercicio
    - Chips de mÃºsculos que trabaja
    - Icono del equipamiento
    
    InteracciÃ³n:
    - Hover: muestra GIF en loop
    - Click: llama onClick
    - Selected: borde dorado

TAREA-07.3.5:
  Nombre: "Crear componente SetTracker"
  AcciÃ³n: "Crear /src/components/tools/gym/SetTracker.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente SetTracker:
    
    Props:
    - exercise: Exercise
    - sets: WorkoutSet[]
    - previousBest?: { weight: number, reps: number }
    - onSetComplete: (setIndex: number) => void
    - onUpdateSet: (setIndex: number, updates: Partial<WorkoutSet>) => void
    - onAddSet: () => void
    
    Estructura:
    - Header con nombre del ejercicio y GIF pequeÃ±o
    - Si previousBest: "Mejor anterior: 80kg Ã— 8"
    - Lista de sets:
      - Cada row: [Set #] [Input kg] Ã— [Input reps] [Checkbox completado]
      - Set warmup con estilo diferente
    - BotÃ³n "Agregar set"
    
    Funcionalidad:
    - Al completar set: vibraciÃ³n, sonido
    - Si supera previousBest: mostrar "ğŸ† PR!"
    - Inputs numÃ©ricos con +/- buttons

TAREA-07.3.6:
  Nombre: "Crear componente RestTimer"
  AcciÃ³n: "Crear /src/components/tools/gym/RestTimer.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente RestTimer:
    
    Props:
    - seconds: number (default 90)
    - onComplete: () => void
    - onSkip: () => void
    - autoStart?: boolean
    
    Estructura:
    - Modal/overlay que aparece entre sets
    - Timer circular grande
    - "Descanso" texto
    - BotÃ³n "Saltar descanso"
    - Sonido/vibraciÃ³n al completar
    
    Estilo:
    - Fondo semitransparente
    - Timer prominente
    - AnimaciÃ³n de countdown

TAREA-07.3.7:
  Nombre: "Crear componente WorkoutBuilder"
  AcciÃ³n: "Crear /src/components/tools/gym/WorkoutBuilder.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente WorkoutBuilder:
    
    Props:
    - template?: WorkoutTemplate (para precargar)
    - onStart: (workout: Workout) => void
    
    Estructura:
    1. Input nombre del workout
    2. Lista de ejercicios agregados:
       - Drag & drop para reordenar
       - Configurar sets/reps por ejercicio
       - BotÃ³n eliminar
    3. BotÃ³n "Agregar ejercicio" â†’ abre selector
    4. Tiempo estimado total
    5. BotÃ³n "INICIAR ENTRENAMIENTO"
    
    Selector de ejercicio:
    - Modal con grid de ExerciseCards
    - Filtros por mÃºsculo
    - Click agrega al workout

TAREA-07.3.8:
  Nombre: "Crear componente WorkoutSummary"
  AcciÃ³n: "Crear /src/components/tools/gym/WorkoutSummary.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente WorkoutSummary:
    
    Props:
    - workout: Workout (completado)
    - prsAchieved: PersonalRecord[]
    - onClose: () => void
    
    Estructura:
    - Header "ENTRENAMIENTO COMPLETADO"
    - DuraciÃ³n total
    - Volumen total (suma de kg Ã— reps)
    - Ejercicios completados / total
    - SecciÃ³n de PRs logrados (si hay)
    - BTC ganados
    - BotÃ³n "Cerrar"
    
    Animaciones:
    - Confetti si hay PRs
    - Counter de BTC subiendo

TAREA-07.3.9:
  Nombre: "Crear Server Action saveWorkout"
  AcciÃ³n: "Crear /src/actions/tools/gym/saveWorkout.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la Server Action saveWorkout:
    
    'use server'
    
    Input (Zod):
    - workout: Workout completo
    
    Proceso:
    1. Verificar autenticaciÃ³n
    2. Calcular volumen total: Î£(weight Ã— reps) de todos los sets completados
    3. Calcular duraciÃ³n: completedAt - startedAt
    4. Detectar PRs:
       - Para cada ejercicio, comparar con workout_logs anteriores
       - Si weight > max anterior con mismas reps â†’ PR
    5. Guardar en workout_logs (nueva tabla o JSON en tool_progress)
    6. Determinar tipo de tarea completada:
       - Si type = 'strength' y >= 3 ejercicios con 3+ sets â†’ tarea 'strength'
       - Si type = 'cardio' y >= 20 min â†’ tarea 'cardio'
    7. Si aplica, llamar a completeToolSession
    
    Output:
    - { success, btcEarned, prsAchieved[], vectorChange }

TAREA-07.3.10:
  Nombre: "Crear pÃ¡gina principal del Gym"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/gym/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/gym:
    
    Estructura:
    1. ToolHeader: "TEMPLO DEL HIERRO"
    
    2. BotÃ³n grande "INICIAR ENTRENAMIENTO" 
       â†’ navega a /tools/gym/workout
    
    3. SecciÃ³n "Rutinas RÃ¡pidas":
       - Cards de WorkoutTemplates
       - Click â†’ inicia WorkoutBuilder con template
    
    4. SecciÃ³n "Ãšltimos Entrenamientos":
       - Lista de Ãºltimos 5 workouts
       - Fecha, duraciÃ³n, volumen
    
    5. SecciÃ³n "Personal Records":
       - Top PRs del usuario
       - Ejercicio, peso, reps, fecha
    
    6. Link "Ver todos los ejercicios" â†’ /tools/gym/exercises

TAREA-07.3.11:
  Nombre: "Crear pÃ¡gina de Workout Activo"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/gym/workout/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/gym/workout:
    
    Estado:
    - workout: Workout (en progreso)
    - currentExerciseIndex: number
    - showRestTimer: boolean
    
    Estructura:
    1. Header con timer de workout total
    
    2. Indicador de progreso: "Ejercicio 2 de 5"
    
    3. SetTracker del ejercicio actual
    
    4. RestTimer (modal) cuando showRestTimer = true
    
    5. Botones:
       - "Siguiente ejercicio" (si no es el Ãºltimo)
       - "Terminar entrenamiento"
    
    Flujo:
    1. Si no hay workout en estado, mostrar WorkoutBuilder
    2. Al iniciar, crear Workout y comenzar timer
    3. Al completar set, mostrar RestTimer
    4. Al terminar RestTimer o skip, continuar
    5. Al finalizar, llamar a saveWorkout
    6. Mostrar WorkoutSummary
    
    PrevenciÃ³n de pÃ©rdida:
    - Guardar estado en localStorage
    - Confirmar antes de salir si hay workout activo

TAREA-07.3.12:
  Nombre: "Crear pÃ¡gina de CatÃ¡logo de Ejercicios"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/gym/exercises/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/gym/exercises:
    
    Estructura:
    1. ToolHeader: "CATÃLOGO DE EJERCICIOS"
    
    2. Filtros:
       - Tabs por MuscleGroup
       - Toggle de equipamiento
    
    3. Grid de ExerciseCards
       - 3 columnas desktop
       - Filtrado segÃºn selecciÃ³n
    
    4. Modal ExerciseDetail al click:
       - GIF grande en loop
       - DescripciÃ³n
       - Tips
       - MÃºsculos trabajados
       - BotÃ³n "Agregar a workout" (si viene de builder)

SUBCAJA 07.4: CÃ¡mara de MeditaciÃ³n
Herramienta de MeditaciÃ³n Guiada
Archivos a Crear
CopyRutas:
â”œâ”€â”€ /src/app/(dashboard)/tools/meditation/page.tsx
â”œâ”€â”€ /src/app/(dashboard)/tools/meditation/[sessionId]/page.tsx
â”œâ”€â”€ /src/components/tools/meditation/MeditationCard.tsx
â”œâ”€â”€ /src/components/tools/meditation/MeditationPlayer.tsx
â”œâ”€â”€ /src/components/tools/meditation/BreathingGuide.tsx
â”œâ”€â”€ /src/lib/tools/meditation/sessions.ts
â”œâ”€â”€ /src/lib/tools/meditation/types.ts
â”œâ”€â”€ /src/actions/tools/meditation/completeMeditation.ts
â”œâ”€â”€ /public/audio/meditations/[session].mp3

Tiempo de GeneraciÃ³n: 45-60 minutos
Estructura del MÃ³dulo
Copy07.4 CÃ¡mara de MeditaciÃ³n
â”‚
â”œâ”€â”€ 1. TIPOS ESPECÃFICOS (/lib/tools/meditation/types.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.1 MeditationType
â”‚   â”‚   â””â”€â”€ 'guided' | 'breathing' | 'binaural' | 'silence'
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.2 MeditationSession
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ title: string
â”‚   â”‚   â”œâ”€â”€ description: string
â”‚   â”‚   â”œâ”€â”€ type: MeditationType
â”‚   â”‚   â”œâ”€â”€ durationMinutes: number
â”‚   â”‚   â”œâ”€â”€ audioUrl: string
â”‚   â”‚   â”œâ”€â”€ category: 'morning' | 'focus' | 'stress' | 'sleep'
â”‚   â”‚   â””â”€â”€ difficulty: 'beginner' | 'intermediate' | 'advanced'
â”‚   â”‚
â”‚   â””â”€â”€ 1.3 MeditationProgress
â”‚       â”œâ”€â”€ sessionId: string
â”‚       â”œâ”€â”€ completedAt: Date
â”‚       â””â”€â”€ durationListened: number
â”‚
â”œâ”€â”€ 2. CATÃLOGO DE MEDITACIONES (/lib/tools/meditation/sessions.ts)
â”‚   â”‚
â”‚   â””â”€â”€ MEDITATION_CATALOG: MeditationSession[]
â”‚       â”œâ”€â”€ MATUTINAS
â”‚       â”‚   â”œâ”€â”€ "Despertar del Guerrero" (10 min)
â”‚       â”‚   â””â”€â”€ "IntenciÃ³n del DÃ­a" (5 min)
â”‚       â”‚
â”‚       â”œâ”€â”€ ENFOQUE
â”‚       â”‚   â”œâ”€â”€ "PreparaciÃ³n Mental" (10 min)
â”‚       â”‚   â””â”€â”€ "ConcentraciÃ³n Profunda" (15 min)
â”‚       â”‚
â”‚       â”œâ”€â”€ ESTRÃ‰S
â”‚       â”‚   â”œâ”€â”€ "Calma en el Caos" (10 min)
â”‚       â”‚   â””â”€â”€ "RespiraciÃ³n 4-7-8" (5 min)
â”‚       â”‚
â”‚       â”œâ”€â”€ SUEÃ‘O
â”‚       â”‚   â”œâ”€â”€ "RelajaciÃ³n Nocturna" (20 min)
â”‚       â”‚   â””â”€â”€ "Body Scan" (15 min)
â”‚       â”‚
â”‚       â””â”€â”€ BINAURALES (sin guÃ­a vocal)
â”‚           â”œâ”€â”€ "Alpha Focus" (30 min)
â”‚           â”œâ”€â”€ "Theta Deep" (30 min)
â”‚           â””â”€â”€ "Delta Sleep" (45 min)
â”‚
â”œâ”€â”€ 3. COMPONENTES
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.1 MeditationCard
â”‚   â”‚   â”œâ”€â”€ Props: { session, onSelect, isCompleted }
â”‚   â”‚   â””â”€â”€ Muestra: TÃ­tulo, duraciÃ³n, tipo, icono
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.2 MeditationPlayer
â”‚   â”‚   â”œâ”€â”€ Props: { session, onComplete, onProgress }
â”‚   â”‚   â”œâ”€â”€ Features:
â”‚   â”‚   â”‚   â”œâ”€â”€ Reproductor de audio
â”‚   â”‚   â”‚   â”œâ”€â”€ VisualizaciÃ³n de ondas
â”‚   â”‚   â”‚   â”œâ”€â”€ No permite skip adelante
â”‚   â”‚   â”‚   â””â”€â”€ Background play
â”‚   â”‚   â””â”€â”€ Valida: 90% escuchado para completar
â”‚   â”‚
â”‚   â””â”€â”€ 3.3 BreathingGuide
â”‚       â”œâ”€â”€ Props: { pattern: [inhale, hold, exhale], onComplete }
â”‚       â”œâ”€â”€ Muestra: CÃ­rculo que se expande/contrae
â”‚       â””â”€â”€ Usa: Para ejercicios de respiraciÃ³n
â”‚
â”œâ”€â”€ 4. PÃGINAS
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.1 PÃ¡gina Principal (/tools/meditation)
â”‚   â”‚   â”œâ”€â”€ SecciÃ³n por categorÃ­a
â”‚   â”‚   â”œâ”€â”€ "SesiÃ³n rÃ¡pida" (5 min)
â”‚   â”‚   â””â”€â”€ Historial de sesiones
â”‚   â”‚
â”‚   â””â”€â”€ 4.2 PÃ¡gina de SesiÃ³n (/tools/meditation/[sessionId])
â”‚       â”œâ”€â”€ MeditationPlayer fullscreen
â”‚       â”œâ”€â”€ Ambiente oscuro
â”‚       â””â”€â”€ BotÃ³n salir con confirmaciÃ³n
â”‚
â”œâ”€â”€ 5. SERVER ACTIONS
â”‚   â”‚
â”‚   â””â”€â”€ 5.1 completeMeditation
â”‚       â”œâ”€â”€ Input: sessionId, durationListened
â”‚       â”œâ”€â”€ Valida: >= 90% del audio
â”‚       â””â”€â”€ Completa tarea 'meditation'
â”‚
â””â”€â”€ 6. LÃ“GICA DE VALIDACIÃ“N
    â”‚
    â”œâ”€â”€ 6.1 Criterio de Completado
    â”‚   â””â”€â”€ Escuchar 90% del audio sin saltar
    â”‚
    â”œâ”€â”€ 6.2 Vector afectado
    â”‚   â””â”€â”€ aura_lvl +0.03
    â”‚
    â””â”€â”€ 6.3 DuraciÃ³n mÃ­nima
        â””â”€â”€ 10 minutos para completar tarea
Tareas AtÃ³micas para 07.4 MeditaciÃ³n
yamlCopyTAREA-07.4.1:
  Nombre: "Crear tipos de MeditaciÃ³n"
  AcciÃ³n: "Crear /src/lib/tools/meditation/types.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea los tipos para CÃ¡mara de MeditaciÃ³n:
    
    1. Type MeditationType = 'guided' | 'breathing' | 'binaural' | 'silence'
    
    2. Interface MeditationSession:
       - id, title, description
       - type: MeditationType
       - durationMinutes: number
       - audioUrl: string
       - category: 'morning' | 'focus' | 'stress' | 'sleep'
       - difficulty: 'beginner' | 'intermediate' | 'advanced'
       - imageUrl?: string (para cover)
    
    3. Interface MeditationProgress:
       - sessionId, completedAt, durationListened
       - percentCompleted: number

TAREA-07.4.2:
  Nombre: "Crear catÃ¡logo de meditaciones"
  AcciÃ³n: "Crear /src/lib/tools/meditation/sessions.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el catÃ¡logo con 10 meditaciones:
    
    MORNING (2):
    - "Despertar del Guerrero" - 10 min, guided, beginner
    - "IntenciÃ³n del DÃ­a" - 5 min, guided, beginner
    
    FOCUS (2):
    - "PreparaciÃ³n Mental" - 10 min, guided, intermediate
    - "ConcentraciÃ³n Profunda" - 15 min, guided, advanced
    
    STRESS (2):
    - "Calma en el Caos" - 10 min, guided, beginner
    - "RespiraciÃ³n 4-7-8" - 5 min, breathing, beginner
    
    SLEEP (2):
    - "RelajaciÃ³n Nocturna" - 20 min, guided, beginner
    - "Body Scan" - 15 min, guided, intermediate
    
    BINAURAL (2):
    - "Alpha Focus" - 30 min, binaural
    - "Theta Deep" - 30 min, binaural
    
    Helpers:
    - getMeditationById(id)
    - getMeditationsByCategory(category)
    - getQuickMeditation() â†’ retorna una de <= 5 min

TAREA-07.4.3:
  Nombre: "Crear componente MeditationCard"
  AcciÃ³n: "Crear /src/components/tools/meditation/MeditationCard.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente MeditationCard:
    
    Props:
    - session: MeditationSession
    - onSelect: () => void
    - isCompleted?: boolean
    
    Estructura:
    - Icono segÃºn type (ğŸ§˜ guided, ğŸŒ¬ï¸ breathing, ğŸµ binaural)
    - TÃ­tulo
    - DuraciÃ³n "10 min"
    - Badge de categorÃ­a
    - Check verde si isCompleted
    
    Estilo:
    - Card horizontal
    - Hover: glow suave
    - Colores segÃºn categorÃ­a

TAREA-07.4.4:
  Nombre: "Crear componente MeditationPlayer"
  AcciÃ³n: "Crear /src/components/tools/meditation/MeditationPlayer.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente MeditationPlayer:
    
    Props:
    - session: MeditationSession
    - onComplete: () => void
    - onProgress: (percent: number, currentTime: number) => void
    - onExit: () => void
    
    Estructura:
    - Fullscreen con fondo oscuro/gradiente
    - TÃ­tulo de la sesiÃ³n
    - VisualizaciÃ³n:
      - Para guided/binaural: onda de audio animada
      - Para breathing: cÃ­rculo pulsante
    - Timer central grande
    - BotÃ³n play/pause
    - Barra de progreso (NO clickeable si guided)
    - BotÃ³n "Salir" con confirmaciÃ³n
    
    Funcionalidad:
    - Usar ToolAudioPlayer internamente
    - preventSkip = true para guided
    - Al llegar a 90%: onComplete()
    - Background play via Media Session API
    
    Estilo:
    - Ambiente zen
    - Animaciones suaves
    - Modo oscuro forzado

TAREA-07.4.5:
  Nombre: "Crear componente BreathingGuide"
  AcciÃ³n: "Crear /src/components/tools/meditation/BreathingGuide.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente BreathingGuide:
    
    Props:
    - pattern: { inhale: number, hold: number, exhale: number } (segundos)
    - cycles: number (default 10)
    - onComplete: () => void
    
    Estructura:
    - CÃ­rculo central que:
      - Se expande durante inhale
      - Se mantiene durante hold
      - Se contrae durante exhale
    - Texto: "Inhala" / "MantÃ©n" / "Exhala"
    - Contador de ciclos
    - Timer del ciclo actual
    
    AnimaciÃ³n:
    - TransiciÃ³n suave del cÃ­rculo
    - Cambio de color segÃºn fase
    - VibraciÃ³n suave al cambiar fase

TAREA-07.4.6:
  Nombre: "Crear Server Action completeMeditation"
  AcciÃ³n: "Crear /src/actions/tools/meditation/completeMeditation.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la Server Action completeMeditation:
    
    'use server'
    
    Input (Zod):
    - sessionId: string
    - durationListenedSeconds: number
    
    Proceso:
    1. Verificar autenticaciÃ³n
    2. Obtener sesiÃ³n del catÃ¡logo
    3. Calcular porcentaje: duration / (session.durationMinutes * 60)
    4. Si porcentaje >= 0.9:
       - Guardar progreso
       - Si durationListenedSeconds >= 600 (10 min):
         - Llamar a completeToolSession('meditation', ...)
    5. Retornar resultado
    
    Output:
    - { success, taskCompleted, btcEarned }

TAREA-07.4.7:
  Nombre: "Crear pÃ¡gina principal de MeditaciÃ³n"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/meditation/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/meditation:
    
    Estructura:
    1. ToolHeader: "CÃMARA DE MEDITACIÃ“N"
    
    2. BotÃ³n "SesiÃ³n RÃ¡pida" (5 min) - prominente
    
    3. Secciones por categorÃ­a:
       - MATUTINAS
       - ENFOQUE
       - ESTRÃ‰S
       - SUEÃ‘O
       - BINAURALES
       
       Cada secciÃ³n: scroll horizontal de MeditationCards
    
    4. SecciÃ³n "Completadas hoy" (si hay)
    
    Funcionalidad:
    - Click en card â†’ navegar a /tools/meditation/[sessionId]
    - Cargar estado de completado del dÃ­a

TAREA-07.4.8:
  Nombre: "Crear pÃ¡gina de SesiÃ³n de MeditaciÃ³n"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/meditation/[sessionId]/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/meditation/[sessionId]:
    
    Params: sessionId
    
    Estructura:
    - MeditationPlayer fullscreen
    - Sin header (experiencia inmersiva)
    - BotÃ³n de salir en esquina
    
    Funcionalidad:
    - Cargar sesiÃ³n por ID
    - Si no existe: redirect a /tools/meditation
    - onComplete: guardar y mostrar mensaje de Ã©xito
    - onExit: confirmar si progreso > 50%
    
    UX:
    - TransiciÃ³n fade-in al entrar
    - Bloquear notificaciones del sistema (si posible)

SUBCAJA 07.5: BitÃ¡cora de Guerra (Journal)
Herramienta de Journaling
Archivos a Crear
CopyRutas:
â”œâ”€â”€ /src/app/(dashboard)/tools/journal/page.tsx
â”œâ”€â”€ /src/app/(dashboard)/tools/journal/new/page.tsx
â”œâ”€â”€ /src/app/(dashboard)/tools/journal/[entryId]/page.tsx
â”œâ”€â”€ /src/components/tools/journal/JournalEditor.tsx
â”œâ”€â”€ /src/components/tools/journal/JournalEntry.tsx
â”œâ”€â”€ /src/components/tools/journal/JournalPrompt.tsx
â”œâ”€â”€ /src/components/tools/journal/JournalCalendar.tsx
â”œâ”€â”€ /src/lib/tools/journal/prompts.ts
â”œâ”€â”€ /src/lib/tools/journal/types.ts
â”œâ”€â”€ /src/actions/tools/journal/saveEntry.ts
â”œâ”€â”€ /src/actions/tools/journal/getEntries.ts

Tiempo de GeneraciÃ³n: 45-60 minutos
Estructura del MÃ³dulo
Copy07.5 BitÃ¡cora de Guerra
â”‚
â”œâ”€â”€ 1. TIPOS ESPECÃFICOS (/lib/tools/journal/types.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.1 JournalEntry
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ userId: string
â”‚   â”‚   â”œâ”€â”€ date: Date
â”‚   â”‚   â”œâ”€â”€ dayNumber: number (del protocolo)
â”‚   â”‚   â”œâ”€â”€ content: string (HTML o Markdown)
â”‚   â”‚   â”œâ”€â”€ wordCount: number
â”‚   â”‚   â”œâ”€â”€ promptsAnswered: string[]
â”‚   â”‚   â”œâ”€â”€ mood: 1-5 (opcional)
â”‚   â”‚   â”œâ”€â”€ createdAt: Date
â”‚   â”‚   â””â”€â”€ updatedAt: Date
â”‚   â”‚
â”‚   â””â”€â”€ 1.2 JournalPrompt
â”‚       â”œâ”€â”€ id: string
â”‚       â”œâ”€â”€ question: string
â”‚       â”œâ”€â”€ category: 'reflection' | 'planning' | 'gratitude' | 'goals'
â”‚       â””â”€â”€ phase: number (1-4 del protocolo)
â”‚
â”œâ”€â”€ 2. PROMPTS DE JOURNAL (/lib/tools/journal/prompts.ts)
â”‚   â”‚
â”‚   â””â”€â”€ JOURNAL_PROMPTS: JournalPrompt[]
â”‚       â”œâ”€â”€ REFLEXIÃ“N
â”‚       â”‚   â”œâ”€â”€ "Â¿QuÃ© lograste hoy?"
â”‚       â”‚   â”œâ”€â”€ "Â¿QuÃ© podrÃ­as haber hecho mejor?"
â”‚       â”‚   â””â”€â”€ "Â¿QuÃ© aprendiste de tus errores?"
â”‚       â”‚
â”‚       â”œâ”€â”€ PLANIFICACIÃ“N
â”‚       â”‚   â”œâ”€â”€ "Â¿CuÃ¡les son tus 3 prioridades para maÃ±ana?"
â”‚       â”‚   â””â”€â”€ "Â¿QuÃ© obstÃ¡culos anticipas?"
â”‚       â”‚
â”‚       â”œâ”€â”€ GRATITUD
â”‚       â”‚   â”œâ”€â”€ "Menciona 3 cosas por las que estÃ¡s agradecido"
â”‚       â”‚   â””â”€â”€ "Â¿QuiÃ©n te ayudÃ³ hoy?"
â”‚       â”‚
â”‚       â””â”€â”€ METAS
â”‚           â”œâ”€â”€ "Â¿CÃ³mo te acercaste a tu meta principal?"
â”‚           â””â”€â”€ "Â¿QuÃ© harÃ­as diferente si pudieras repetir el dÃ­a?"
â”‚
â”œâ”€â”€ 3. COMPONENTES
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.1 JournalEditor
â”‚   â”‚   â”œâ”€â”€ Props: { initialContent?, onSave, minWords }
â”‚   â”‚   â”œâ”€â”€ Editor: Tiptap o similar (rich text)
â”‚   â”‚   â”œâ”€â”€ Features:
â”‚   â”‚   â”‚   â”œâ”€â”€ Formato bÃ¡sico (bold, italic, lists)
â”‚   â”‚   â”‚   â”œâ”€â”€ Contador de palabras
â”‚   â”‚   â”‚   â””â”€â”€ Auto-save cada 30s
â”‚   â”‚   â””â”€â”€ Valida: MÃ­nimo 100 palabras
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.2 JournalEntry
â”‚   â”‚   â”œâ”€â”€ Props: { entry, onClick }
â”‚   â”‚   â””â”€â”€ Muestra: Fecha, preview del contenido, mood
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.3 JournalPrompt
â”‚   â”‚   â”œâ”€â”€ Props: { prompt, onAnswer }
â”‚   â”‚   â””â”€â”€ Muestra: Pregunta con botÃ³n para responder
â”‚   â”‚
â”‚   â””â”€â”€ 3.4 JournalCalendar
â”‚       â”œâ”€â”€ Props: { entries, onSelectDate }
â”‚       â””â”€â”€ Muestra: Calendario con dÃ­as marcados
â”‚
â”œâ”€â”€ 4. PÃGINAS
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.1 PÃ¡gina Principal (/tools/journal)
â”‚   â”‚   â”œâ”€â”€ BotÃ³n "Nueva entrada" (si no hay hoy)
â”‚   â”‚   â”œâ”€â”€ Entrada de hoy (si existe)
â”‚   â”‚   â”œâ”€â”€ JournalCalendar
â”‚   â”‚   â””â”€â”€ Lista de entradas recientes
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.2 Nueva Entrada (/tools/journal/new)
â”‚   â”‚   â”œâ”€â”€ Prompts sugeridos del dÃ­a
â”‚   â”‚   â”œâ”€â”€ JournalEditor
â”‚   â”‚   â””â”€â”€ BotÃ³n guardar
â”‚   â”‚
â”‚   â””â”€â”€ 4.3 Ver Entrada (/tools/journal/[entryId])
â”‚       â””â”€â”€ Entrada en modo lectura (no editable)
â”‚
â”œâ”€â”€ 5. SERVER ACTIONS
â”‚   â”‚
â”‚   â”œâ”€â”€ 5.1 saveEntry
â”‚   â”‚   â”œâ”€â”€ Input: content, promptsAnswered
â”‚   â”‚   â”œâ”€â”€ Calcula wordCount
â”‚   â”‚   â”œâ”€â”€ Si wordCount >= 100: completa tarea 'journal'
â”‚   â”‚   â””â”€â”€ Guarda en journal_entries
â”‚   â”‚
â”‚   â””â”€â”€ 5.2 getEntries
â”‚       â”œâ”€â”€ Input: dateRange? (opcional)
â”‚       â””â”€â”€ Retorna entradas del usuario
â”‚
â””â”€â”€ 6. LÃ“GICA DE VALIDACIÃ“N
    â”‚
    â”œâ”€â”€ 6.1 Criterio de Completado
    â”‚   â””â”€â”€ MÃ­nimo 100 palabras O responder 3 prompts
    â”‚
    â”œâ”€â”€ 6.2 Vector afectado
    â”‚   â””â”€â”€ wealth_lvl +0.03 (productividad mental)
    â”‚
    â””â”€â”€ 6.3 Una entrada por dÃ­a
        â””â”€â”€ Si ya existe entrada hoy, se edita
Tareas AtÃ³micas para 07.5 Journal
yamlCopyTAREA-07.5.1:
  Nombre: "Crear tipos de Journal"
  AcciÃ³n: "Crear /src/lib/tools/journal/types.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea los tipos para BitÃ¡cora de Guerra:
    
    1. Interface JournalEntry:
       - id: string
       - userId: string
       - date: Date
       - dayNumber: number
       - content: string
       - wordCount: number
       - promptsAnswered: string[]
       - mood?: 1 | 2 | 3 | 4 | 5
       - createdAt: Date
       - updatedAt: Date
    
    2. Interface JournalPrompt:
       - id: string
       - question: string
       - category: 'reflection' | 'planning' | 'gratitude' | 'goals'
       - phase: 1 | 2 | 3 | 4
    
    3. Type JournalSaveInput:
       - content: string
       - promptsAnswered?: string[]
       - mood?: number

TAREA-07.5.2:
  Nombre: "Crear prompts de Journal"
  AcciÃ³n: "Crear /src/lib/tools/journal/prompts.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el catÃ¡logo de prompts (mÃ­nimo 15):
    
    REFLECTION (4):
    - "Â¿QuÃ© lograste hoy?"
    - "Â¿QuÃ© podrÃ­as haber hecho mejor?"
    - "Â¿QuÃ© aprendiste?"
    - "Â¿QuÃ© te hizo sentir orgulloso?"
    
    PLANNING (4):
    - "Â¿CuÃ¡les son tus 3 prioridades para maÃ±ana?"
    - "Â¿QuÃ© obstÃ¡culos anticipas?"
    - "Â¿CÃ³mo vas a superarlos?"
    - "Â¿QuÃ© hÃ¡bito quieres fortalecer maÃ±ana?"
    
    GRATITUDE (3):
    - "Menciona 3 cosas por las que estÃ¡s agradecido"
    - "Â¿QuiÃ©n te ayudÃ³ hoy?"
    - "Â¿QuÃ© momento del dÃ­a disfrutaste mÃ¡s?"
    
    GOALS (4):
    - "Â¿CÃ³mo te acercaste a tu meta principal?"
    - "Â¿EstÃ¡s en el camino correcto? Â¿Por quÃ©?"
    - "Â¿QuÃ© necesitas cambiar para avanzar mÃ¡s rÃ¡pido?"
    - "Visualiza tu yo de dentro de 30 dÃ­as. Â¿QuÃ© estÃ¡ haciendo diferente?"
    
    Helpers:
    - getDailyPrompts(dayNumber): 3 prompts aleatorios por dÃ­a
    - getPromptsByCategory(category)

TAREA-07.5.3:
  Nombre: "Crear componente JournalEditor"
  AcciÃ³n: "Crear /src/components/tools/journal/JournalEditor.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente JournalEditor usando Tiptap:
    
    Props:
    - initialContent?: string
    - onSave: (content: string, wordCount: number) => void
    - minWords?: number (default 100)
    - prompts?: JournalPrompt[]
    
    Estructura:
    - Toolbar: Bold, Italic, Bullet List, Heading
    - Editor area (altura flexible, min 300px)
    - Footer:
      - Contador de palabras "45/100 palabras"
      - Indicador de auto-guardado
      - BotÃ³n "Guardar" (disabled si < minWords)
    
    Funcionalidad:
    - Auto-save cada 30 segundos a localStorage
    - Contar palabras en tiempo real
    - Mostrar prompts como sugerencias clickeables
    - Al click en prompt: insertar en el editor como heading
    
    Estilo:
    - Editor oscuro
    - Contador cambia de rojo a verde al cumplir mÃ­nimo

TAREA-07.5.4:
  Nombre: "Crear componente JournalCalendar"
  AcciÃ³n: "Crear /src/components/tools/journal/JournalCalendar.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente JournalCalendar:
    
    Props:
    - entries: JournalEntry[]
    - onSelectDate: (date: Date) => void
    - currentMonth?: Date
    
    Estructura:
    - Header con mes/aÃ±o y navegaciÃ³n
    - Grid de dÃ­as
    - DÃ­as con entrada: marcados con punto/color
    - DÃ­a actual: highlight
    - DÃ­as futuros: deshabilitados
    
    InteracciÃ³n:
    - Click en dÃ­a con entrada â†’ onSelectDate
    - Click en dÃ­a sin entrada â†’ navegar a crear
    
    Estilo:
    - Compacto
    - Colores segÃºn mood si existe

TAREA-07.5.5:
  Nombre: "Crear Server Action saveEntry"
  AcciÃ³n: "Crear /src/actions/tools/journal/saveEntry.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la Server Action saveEntry:
    
    'use server'
    
    Input (Zod):
    - content: string
    - promptsAnswered?: string[]
    - mood?: number (1-5)
    
    Proceso:
    1. Verificar autenticaciÃ³n
    2. Calcular wordCount (strip HTML, contar palabras)
    3. Obtener dayNumber actual del avatar_state
    4. Buscar si ya existe entrada para hoy:
       - Si existe: UPDATE
       - Si no: INSERT
    5. Si wordCount >= 100 O promptsAnswered.length >= 3:
       - Llamar a completeToolSession('journal', ...)
    6. Retornar resultado
    
    Output:
    - { success, entry, taskCompleted, btcEarned }

TAREA-07.5.6:
  Nombre: "Crear pÃ¡gina principal de Journal"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/journal/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/journal:
    
    Estructura:
    1. ToolHeader: "BITÃCORA DE GUERRA"
    
    2. Si hay entrada de hoy:
       - Card con preview de la entrada
       - BotÃ³n "Continuar escribiendo"
    
    3. Si NO hay entrada de hoy:
       - BotÃ³n grande "ESCRIBIR ENTRADA DE HOY"
    
    4. JournalCalendar (Ãºltimos 2 meses)
    
    5. Lista "Entradas recientes":
       - Ãšltimas 5 entradas
       - JournalEntry cards
       - Click â†’ ver entrada
    
    Stats:
    - DÃ­as con entrada este mes
    - Racha de journaling

TAREA-07.5.7:
  Nombre: "Crear pÃ¡gina nueva entrada"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/journal/new/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/journal/new:
    
    Estructura:
    1. ToolHeader: "DÃA [X] - [Fecha]"
    
    2. SecciÃ³n de prompts sugeridos:
       - 3 prompts del dÃ­a
       - Click en prompt lo agrega al editor
    
    3. JournalEditor (ocupa resto de pantalla)
    
    4. Selector de mood (opcional):
       - 5 emojis: ğŸ˜ ğŸ˜ ğŸ™‚ ğŸ˜Š ğŸ”¥
    
    Funcionalidad:
    - Cargar entrada existente si hay (para editar)
    - onSave â†’ saveEntry â†’ mostrar confirmaciÃ³n
    - Advertir antes de salir si hay cambios sin guardar

SUBCAJA 07.6: Vitalidad Sexual (Kegel)
Herramienta de Ejercicios Kegel
Archivos a Crear
CopyRutas:
â”œâ”€â”€ /src/app/(dashboard)/tools/kegel/page.tsx
â”œâ”€â”€ /src/components/tools/kegel/KegelTrainer.tsx
â”œâ”€â”€ /src/components/tools/kegel/KegelProgress.tsx
â”œâ”€â”€ /src/lib/tools/kegel/routines.ts
â”œâ”€â”€ /src/lib/tools/kegel/types.ts
â”œâ”€â”€ /src/actions/tools/kegel/completeKegel.ts

Tiempo de GeneraciÃ³n: 30-45 minutos
Estructura del MÃ³dulo
Copy07.6 Vitalidad Sexual
â”‚
â”œâ”€â”€ 1. TIPOS ESPECÃFICOS (/lib/tools/kegel/types.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.1 KegelRoutine
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ name: string
â”‚   â”‚   â”œâ”€â”€ holdSeconds: number
â”‚   â”‚   â”œâ”€â”€ relaxSeconds: number
â”‚   â”‚   â”œâ”€â”€ reps: number
â”‚   â”‚   â”œâ”€â”€ sets: number
â”‚   â”‚   â”œâ”€â”€ restBetweenSets: number
â”‚   â”‚   â””â”€â”€ difficulty: 'beginner' | 'intermediate' | 'advanced'
â”‚   â”‚
â”‚   â””â”€â”€ 1.2 KegelSession
â”‚       â”œâ”€â”€ routineId: string
â”‚       â”œâ”€â”€ completedReps: number
â”‚       â”œâ”€â”€ completedSets: number
â”‚       â””â”€â”€ totalDuration: number
â”‚
â”œâ”€â”€ 2. RUTINAS DE KEGEL (/lib/tools/kegel/routines.ts)
â”‚   â”‚
â”‚   â””â”€â”€ KEGEL_ROUTINES: KegelRoutine[]
â”‚       â”œâ”€â”€ beginner: 5s hold, 5s relax, 10 reps, 3 sets
â”‚       â”œâ”€â”€ intermediate: 7s hold, 5s relax, 12 reps, 3 sets
â”‚       â””â”€â”€ advanced: 10s hold, 5s relax, 15 reps, 4 sets
â”‚
â”œâ”€â”€ 3. COMPONENTES
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.1 KegelTrainer
â”‚   â”‚   â”œâ”€â”€ Props: { routine, onComplete }
â”‚   â”‚   â”œâ”€â”€ Muestra:
â”‚   â”‚   â”‚   â”œâ”€â”€ CÃ­rculo pulsante (expandir=apretar, contraer=relajar)
â”‚   â”‚   â”‚   â”œâ”€â”€ Texto "APRIETA" / "RELAJA"
â”‚   â”‚   â”‚   â”œâ”€â”€ Timer del hold actual
â”‚   â”‚   â”‚   â”œâ”€â”€ Contador de reps/sets
â”‚   â”‚   â”‚   â””â”€â”€ VibraciÃ³n del dispositivo como guÃ­a
â”‚   â”‚   â””â”€â”€ Audio: Beep al cambiar fase
â”‚   â”‚
â”‚   â””â”€â”€ 3.2 KegelProgress
â”‚       â”œâ”€â”€ Props: { totalSessions, currentLevel }
â”‚       â””â”€â”€ Muestra: Progreso hacia siguiente nivel
â”‚
â”œâ”€â”€ 4. PÃGINAS
â”‚   â”‚
â”‚   â””â”€â”€ 4.1 PÃ¡gina Principal (/tools/kegel)
â”‚       â”œâ”€â”€ Selector de rutina (nivel)
â”‚       â”œâ”€â”€ BotÃ³n "INICIAR"
â”‚       â”œâ”€â”€ KegelTrainer (cuando activo)
â”‚       â”œâ”€â”€ Stats: sesiones completadas
â”‚       â””â”€â”€ Tutorial inicial (primera vez)
â”‚
â”œâ”€â”€ 5. SERVER ACTIONS
â”‚   â”‚
â”‚   â””â”€â”€ 5.1 completeKegel
â”‚       â”œâ”€â”€ Input: routineId, session
â”‚       â””â”€â”€ Completa tarea 'kegel' (2x al dÃ­a disponible)
â”‚
â””â”€â”€ 6. LÃ“GICA DE VALIDACIÃ“N
    â”‚
    â”œâ”€â”€ 6.1 Criterio de Completado
    â”‚   â””â”€â”€ Completar rutina completa (3-4 sets)
    â”‚
    â”œâ”€â”€ 6.2 Vector afectado
    â”‚   â””â”€â”€ face_lvl +0.02 (arquetipo CARA)
    â”‚
    â””â”€â”€ 6.3 Frecuencia
        â””â”€â”€ 2 sesiones diarias, 5 dÃ­as a la semana
Tareas AtÃ³micas para 07.6 Kegel
yamlCopyTAREA-07.6.1:
  Nombre: "Crear tipos de Kegel"
  AcciÃ³n: "Crear /src/lib/tools/kegel/types.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea los tipos para Vitalidad Sexual:
    
    1. Interface KegelRoutine:
       - id: string
       - name: string
       - holdSeconds: number
       - relaxSeconds: number
       - reps: number
       - sets: number
       - restBetweenSets: number
       - difficulty: 'beginner' | 'intermediate' | 'advanced'
       - estimatedMinutes: number
    
    2. Interface KegelSession:
       - routineId: string
       - completedReps: number
       - completedSets: number
       - totalDurationSeconds: number
       - completedAt: Date
    
    3. Type KegelPhase = 'hold' | 'relax' | 'rest'

TAREA-07.6.2:
  Nombre: "Crear rutinas de Kegel"
  AcciÃ³n: "Crear /src/lib/tools/kegel/routines.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea las rutinas de Kegel:
    
    1. beginner:
       - name: "Nivel Novato"
       - holdSeconds: 5
       - relaxSeconds: 5
       - reps: 10
       - sets: 3
       - restBetweenSets: 30
       - estimatedMinutes: 6
    
    2. intermediate:
       - name: "Nivel Guerrero"
       - holdSeconds: 7
       - relaxSeconds: 5
       - reps: 12
       - sets: 3
       - restBetweenSets: 20
       - estimatedMinutes: 8
    
    3. advanced:
       - name: "Nivel Maestro"
       - holdSeconds: 10
       - relaxSeconds: 5
       - reps: 15
       - sets: 4
       - restBetweenSets: 15
       - estimatedMinutes: 12
    
    Helpers:
    - getRoutineByDifficulty(difficulty)
    - calculateRoutineDuration(routine)

TAREA-07.6.3:
  Nombre: "Crear componente KegelTrainer"
  AcciÃ³n: "Crear /src/components/tools/kegel/KegelTrainer.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente KegelTrainer:
    
    Props:
    - routine: KegelRoutine
    - onComplete: (session: KegelSession) => void
    - onCancel: () => void
    
    Estado:
    - phase: 'hold' | 'relax' | 'rest'
    - currentRep: number
    - currentSet: number
    - phaseTimer: number
    
    Estructura:
    - CÃ­rculo central grande que:
      - Se expande suavemente durante 'hold'
      - Se contrae durante 'relax'
      - Permanece neutro durante 'rest'
    - Texto grande: "APRIETA" / "RELAJA" / "DESCANSO"
    - Timer del fase actual
    - Indicador: "Rep 5/10 â€¢ Set 2/3"
    - Barra de progreso total
    - BotÃ³n "Cancelar"
    
    Funcionalidad:
    - VibraciÃ³n al cambiar de fase (si disponible)
    - Sonido sutil al cambiar
    - Secuencia automÃ¡tica: hold â†’ relax â†’ (repeat) â†’ rest â†’ next set
    - Al completar todos los sets: onComplete
    
    Estilo:
    - Fondo oscuro
    - CÃ­rculo con gradiente segÃºn fase
    - Animaciones fluidas

TAREA-07.6.4:
  Nombre: "Crear Server Action completeKegel"
  AcciÃ³n: "Crear /src/actions/tools/kegel/completeKegel.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la Server Action completeKegel:
    
    'use server'
    
    Input (Zod):
    - routineId: string
    - completedReps: number
    - completedSets: number
    - totalDurationSeconds: number
    
    Proceso:
    1. Verificar autenticaciÃ³n
    2. Verificar que routine existe
    3. Verificar que se completÃ³ al menos 80% (sets/reps)
    4. Contar sesiones de kegel completadas hoy:
       - Si < 2: puede completar tarea 'kegel'
       - Si >= 2: registrar pero no dar recompensa extra
    5. Si aplica: completeToolSession('kegel', ...)
    6. Guardar session en historial
    
    Output:
    - { success, sessionNumber (1 o 2), taskCompleted, btcEarned }

TAREA-07.6.5:
  Nombre: "Crear pÃ¡gina de Kegel"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/kegel/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/kegel:
    
    Estado:
    - selectedRoutine: KegelRoutine | null
    - isTraining: boolean
    - todaySessions: number (0, 1, o 2)
    
    Estructura:
    1. ToolHeader: "VITALIDAD SEXUAL"
    
    2. Si isTraining:
       - KegelTrainer fullscreen
    
    3. Si !isTraining:
       a. Tutorial (solo primera vez):
          - ExplicaciÃ³n breve de quÃ© es y beneficios
          - CÃ³mo hacer el ejercicio
       
       b. Estado del dÃ­a:
          - "SesiÃ³n 1/2 completada" o "0/2"
          - Siguiente sesiÃ³n disponible
       
       c. Selector de nivel:
          - Cards de cada rutina
          - Tiempo estimado
          - Click selecciona
       
       d. BotÃ³n "INICIAR SESIÃ“N"
    
    4. Stats:
       - Sesiones totales
       - Racha actual
       - Nivel actual vs siguiente

SUBCAJA 07.7: Escultor Facial (Mewing)
Herramienta de Yoga Facial
Archivos a Crear
CopyRutas:
â”œâ”€â”€ /src/app/(dashboard)/tools/facial/page.tsx
â”œâ”€â”€ /src/app/(dashboard)/tools/facial/[routineId]/page.tsx
â”œâ”€â”€ /src/components/tools/facial/FacialRoutineCard.tsx
â”œâ”€â”€ /src/components/tools/facial/FacialExercise.tsx
â”œâ”€â”€ /src/components/tools/facial/MewingGuide.tsx
â”œâ”€â”€ /src/lib/tools/facial/routines.ts
â”œâ”€â”€ /src/lib/tools/facial/types.ts
â”œâ”€â”€ /src/actions/tools/facial/completeFacial.ts

Tiempo de GeneraciÃ³n: 30-45 minutos
Estructura del MÃ³dulo
Copy07.7 Escultor Facial
â”‚
â”œâ”€â”€ 1. TIPOS ESPECÃFICOS (/lib/tools/facial/types.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.1 FacialExercise
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ name: string
â”‚   â”‚   â”œâ”€â”€ description: string
â”‚   â”‚   â”œâ”€â”€ durationSeconds: number
â”‚   â”‚   â”œâ”€â”€ reps: number (si aplica)
â”‚   â”‚   â”œâ”€â”€ gifUrl: string
â”‚   â”‚   â””â”€â”€ targetArea: 'jaw' | 'cheeks' | 'forehead' | 'neck'
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.2 FacialRoutine
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ name: string
â”‚   â”‚   â”œâ”€â”€ description: string
â”‚   â”‚   â”œâ”€â”€ exercises: FacialExercise[]
â”‚   â”‚   â””â”€â”€ totalMinutes: number
â”‚   â”‚
â”‚   â””â”€â”€ 1.3 MewingGuidance
â”‚       â”œâ”€â”€ tonguePosition: string
â”‚       â”œâ”€â”€ teethPosition: string
â”‚       â””â”€â”€ breathingTip: string
â”‚
â”œâ”€â”€ 2. RUTINAS FACIALES (/lib/tools/facial/routines.ts)
â”‚   â”‚
â”‚   â””â”€â”€ FACIAL_ROUTINES: FacialRoutine[]
â”‚       â”œâ”€â”€ morning_routine: "Rutina Matutina" (10 min)
â”‚       â”‚   â”œâ”€â”€ Face massage warmup
â”‚       â”‚   â”œâ”€â”€ Jawline clenches
â”‚       â”‚   â”œâ”€â”€ Cheek lifts
â”‚       â”‚   â””â”€â”€ Neck stretches
â”‚       â”‚
â”‚       â”œâ”€â”€ jawline_focus: "DefiniciÃ³n de MandÃ­bula" (8 min)
â”‚       â”‚   â”œâ”€â”€ Chin lifts
â”‚       â”‚   â”œâ”€â”€ Jaw slides
â”‚       â”‚   â””â”€â”€ Resistance exercises
â”‚       â”‚
â”‚       â””â”€â”€ mewing_practice: "PrÃ¡ctica de Mewing" (5 min)
â”‚           â””â”€â”€ GuÃ­a de posiciÃ³n de lengua
â”‚
â”œâ”€â”€ 3. COMPONENTES
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.1 FacialRoutineCard
â”‚   â”‚   â”œâ”€â”€ Props: { routine, onClick }
â”‚   â”‚   â””â”€â”€ Muestra: Nombre, duraciÃ³n, Ã¡rea target
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.2 FacialExercise
â”‚   â”‚   â”œâ”€â”€ Props: { exercise, onComplete }
â”‚   â”‚   â”œâ”€â”€ Muestra: GIF, instrucciones, timer
â”‚   â”‚   â””â”€â”€ TransiciÃ³n automÃ¡tica entre ejercicios
â”‚   â”‚
â”‚   â””â”€â”€ 3.3 MewingGuide
â”‚       â””â”€â”€ GuÃ­a visual de posiciÃ³n de lengua
â”‚
â”œâ”€â”€ 4. PÃGINAS
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.1 PÃ¡gina Principal (/tools/facial)
â”‚   â”‚   â”œâ”€â”€ Rutinas disponibles
â”‚   â”‚   â”œâ”€â”€ GuÃ­a de Mewing
â”‚   â”‚   â””â”€â”€ Progreso semanal
â”‚   â”‚
â”‚   â””â”€â”€ 4.2 PÃ¡gina de Rutina (/tools/facial/[routineId])
â”‚       â””â”€â”€ Secuencia de ejercicios
â”‚
â”œâ”€â”€ 5. SERVER ACTIONS
â”‚   â”‚
â”‚   â””â”€â”€ 5.1 completeFacial
â”‚       â””â”€â”€ Completa tarea 'facial'
â”‚
â””â”€â”€ 6. LÃ“GICA DE VALIDACIÃ“N
    â”‚
    â”œâ”€â”€ 6.1 Criterio de Completado
    â”‚   â””â”€â”€ Completar rutina completa (5-10 min)
    â”‚
    â””â”€â”€ 6.2 Vector afectado
        â””â”€â”€ face_lvl +0.04
Tareas AtÃ³micas para 07.7 Escultor Facial
yamlCopyTAREA-07.7.1:
  Nombre: "Crear tipos de Facial"
  AcciÃ³n: "Crear /src/lib/tools/facial/types.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea los tipos para Escultor Facial:
    
    1. Interface FacialExercise:
       - id, name, description
       - durationSeconds: number
       - reps?: number
       - gifUrl: string
       - targetArea: 'jaw' | 'cheeks' | 'forehead' | 'neck'
       - instructions: string[]
    
    2. Interface FacialRoutine:
       - id, name, description
       - exercises: FacialExercise[]
       - totalMinutes: number
       - difficulty: 'easy' | 'medium' | 'hard'

TAREA-07.7.2:
  Nombre: "Crear rutinas faciales"
  AcciÃ³n: "Crear /src/lib/tools/facial/routines.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea 3 rutinas faciales:
    
    1. morning_routine: "Despertar Facial"
       - Masaje circular de cara (60s)
       - Ejercicios de mandÃ­bula (5 reps, 60s)
       - ElevaciÃ³n de mejillas (10 reps, 90s)
       - Estiramientos de cuello (60s)
       - Total: ~5 min
    
    2. jawline_focus: "Cincel de MandÃ­bula"
       - Chin tucks (10 reps)
       - Jaw clenches (15 reps)
       - Resistance pushes (10 reps)
       - Total: ~8 min
    
    3. mewing_practice: "PrÃ¡ctica Mewing"
       - GuÃ­a de posiciÃ³n correcta
       - Hold de 2 minutos
       - Total: ~5 min
    
    Cada ejercicio con:
    - DescripciÃ³n clara
    - gifUrl placeholder
    - Instrucciones paso a paso

TAREA-07.7.3:
  Nombre: "Crear componente FacialExercise"
  AcciÃ³n: "Crear /src/components/tools/facial/FacialExercise.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente FacialExercise:
    
    Props:
    - exercise: FacialExercise
    - onComplete: () => void
    - onSkip: () => void
    
    Estructura:
    - GIF/Video del ejercicio (loop)
    - Nombre del ejercicio
    - Instrucciones paso a paso
    - Timer o contador de reps
    - Barra de progreso
    - Botones: "Completado" / "Saltar"
    
    Funcionalidad:
    - Auto-avance cuando timer llega a 0
    - VibraciÃ³n al completar
    - TransiciÃ³n suave al siguiente

TAREA-07.7.4:
  Nombre: "Crear pÃ¡gina principal de Facial"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/facial/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/facial:
    
    Estructura:
    1. ToolHeader: "ESCULTOR FACIAL"
    
    2. Grid de FacialRoutineCards
    
    3. SecciÃ³n "Â¿QuÃ© es Mewing?":
       - ExplicaciÃ³n breve
       - Imagen de posiciÃ³n correcta
       - Link a rutina de mewing
    
    4. Stats:
       - Sesiones esta semana
       - Racha

TAREA-07.7.5:
  Nombre: "Crear pÃ¡gina de Rutina Facial"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/facial/[routineId]/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/facial/[routineId]:
    
    Estado:
    - currentExerciseIndex: number
    - isComplete: boolean
    
    Estructura:
    1. Header con nombre de rutina y progreso
    
    2. FacialExercise del ejercicio actual
    
    3. Indicador: "Ejercicio 2 de 4"
    
    4. Al completar todos:
       - Mensaje de Ã©xito
       - BTC ganados
       - BotÃ³n volver
    
    Funcionalidad:
    - Secuencia automÃ¡tica de ejercicios
    - onComplete de cada ejercicio avanza al siguiente
    - Al terminar: completeFacial()

SUBCAJA 07.8: Crea tu Hipnosis [PREMIUM]
Generador de Audio Personalizado con IA
Archivos a Crear
CopyRutas:
â”œâ”€â”€ /src/app/(dashboard)/tools/hypnosis/page.tsx
â”œâ”€â”€ /src/app/(dashboard)/tools/hypnosis/create/page.tsx
â”œâ”€â”€ /src/app/(dashboard)/tools/hypnosis/[audioId]/page.tsx
â”œâ”€â”€ /src/components/tools/hypnosis/HypnosisCreator.tsx
â”œâ”€â”€ /src/components/tools/hypnosis/HypnosisCard.tsx
â”œâ”€â”€ /src/components/tools/hypnosis/HypnosisPlayer.tsx
â”œâ”€â”€ /src/components/tools/hypnosis/WaveSelector.tsx
â”œâ”€â”€ /src/lib/tools/hypnosis/types.ts
â”œâ”€â”€ /src/lib/tools/hypnosis/waves.ts
â”œâ”€â”€ /src/actions/tools/hypnosis/createHypnosis.ts
â”œâ”€â”€ /src/actions/tools/hypnosis/getUserHypnosis.ts

Tiempo de GeneraciÃ³n: 45-60 minutos
Estructura del MÃ³dulo
Copy07.8 Crea tu Hipnosis [PREMIUM]
â”‚
â”œâ”€â”€ 1. TIPOS ESPECÃFICOS (/lib/tools/hypnosis/types.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.1 WaveType
â”‚   â”‚   â””â”€â”€ 'alpha' | 'theta' | 'beta' | 'delta'
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.2 VoiceType
â”‚   â”‚   â””â”€â”€ 'male_deep' | 'male_calm' | 'whisper'
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.3 CustomHypnosis
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ userId: string
â”‚   â”‚   â”œâ”€â”€ title: string
â”‚   â”‚   â”œâ”€â”€ script: string (el decreto)
â”‚   â”‚   â”œâ”€â”€ waveType: WaveType
â”‚   â”‚   â”œâ”€â”€ voiceType: VoiceType
â”‚   â”‚   â”œâ”€â”€ audioUrl: string
â”‚   â”‚   â”œâ”€â”€ durationSeconds: number
â”‚   â”‚   â”œâ”€â”€ createdAt: Date
â”‚   â”‚   â””â”€â”€ playCount: number
â”‚   â”‚
â”‚   â””â”€â”€ 1.4 HypnosisCreationStatus
â”‚       â””â”€â”€ 'pending' | 'processing' | 'completed' | 'failed'
â”‚
â”œâ”€â”€ 2. CONFIGURACIÃ“N DE ONDAS (/lib/tools/hypnosis/waves.ts)
â”‚   â”‚
â”‚   â””â”€â”€ WAVE_CONFIG
â”‚       â”œâ”€â”€ alpha: { frequency: '8-12 Hz', benefit: 'RelajaciÃ³n activa, creatividad' }
â”‚       â”œâ”€â”€ theta: { frequency: '4-8 Hz', benefit: 'MeditaciÃ³n profunda, programaciÃ³n' }
â”‚       â”œâ”€â”€ beta: { frequency: '12-30 Hz', benefit: 'ConcentraciÃ³n, energÃ­a' }
â”‚       â””â”€â”€ delta: { frequency: '0.5-4 Hz', benefit: 'SueÃ±o profundo, regeneraciÃ³n' }
â”‚
â”œâ”€â”€ 3. COMPONENTES
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.1 HypnosisCreator
â”‚   â”‚   â”œâ”€â”€ Props: { onSubmit }
â”‚   â”‚   â”œâ”€â”€ Steps:
â”‚   â”‚   â”‚   â”œâ”€â”€ 1. Escribir decreto/afirmaciones
â”‚   â”‚   â”‚   â”œâ”€â”€ 2. Seleccionar tipo de onda
â”‚   â”‚   â”‚   â”œâ”€â”€ 3. Seleccionar voz
â”‚   â”‚   â”‚   â””â”€â”€ 4. Preview y crear
â”‚   â”‚   â””â”€â”€ Valida: Max 500 palabras, contenido apropiado
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.2 HypnosisCard
â”‚   â”‚   â”œâ”€â”€ Props: { hypnosis, onClick, onDelete }
â”‚   â”‚   â””â”€â”€ Muestra: TÃ­tulo, tipo onda, duraciÃ³n, plays
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.3 HypnosisPlayer
â”‚   â”‚   â”œâ”€â”€ Props: { hypnosis, onComplete }
â”‚   â”‚   â””â”€â”€ Similar a MeditationPlayer
â”‚   â”‚
â”‚   â””â”€â”€ 3.4 WaveSelector
â”‚       â”œâ”€â”€ Props: { selected, onChange }
â”‚       â””â”€â”€ Cards visuales de cada tipo de onda
â”‚
â”œâ”€â”€ 4. PÃGINAS
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.1 PÃ¡gina Principal (/tools/hypnosis)
â”‚   â”‚   â”œâ”€â”€ Check de suscripciÃ³n premium
â”‚   â”‚   â”œâ”€â”€ BotÃ³n "Crear nueva hipnosis"
â”‚   â”‚   â”œâ”€â”€ Lista de hipnosis creadas
â”‚   â”‚   â””â”€â”€ LÃ­mite: 5 hipnosis por usuario
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.2 Crear Hipnosis (/tools/hypnosis/create)
â”‚   â”‚   â””â”€â”€ HypnosisCreator wizard
â”‚   â”‚
â”‚   â””â”€â”€ 4.3 Reproducir (/tools/hypnosis/[audioId])
â”‚       â””â”€â”€ HypnosisPlayer
â”‚
â”œâ”€â”€ 5. SERVER ACTIONS
â”‚   â”‚
â”‚   â”œâ”€â”€ 5.1 createHypnosis
â”‚   â”‚   â”œâ”€â”€ Input: title, script, waveType, voiceType
â”‚   â”‚   â”œâ”€â”€ Proceso:
â”‚   â”‚   â”‚   â”œâ”€â”€ 1. Validar suscripciÃ³n premium
â”‚   â”‚   â”‚   â”œâ”€â”€ 2. Validar lÃ­mite (max 5)
â”‚   â”‚   â”‚   â”œâ”€â”€ 3. Sanitizar script
â”‚   â”‚   â”‚   â”œâ”€â”€ 4. Llamar a API de TTS (ElevenLabs)
â”‚   â”‚   â”‚   â”œâ”€â”€ 5. Mezclar con background de ondas
â”‚   â”‚   â”‚   â”œâ”€â”€ 6. Subir a storage
â”‚   â”‚   â”‚   â””â”€â”€ 7. Guardar en DB
â”‚   â”‚   â””â”€â”€ Output: CustomHypnosis
â”‚   â”‚
â”‚   â”œâ”€â”€ 5.2 getUserHypnosis
â”‚   â”‚   â””â”€â”€ Retorna hipnosis del usuario
â”‚   â”‚
â”‚   â””â”€â”€ 5.3 deleteHypnosis
â”‚       â””â”€â”€ Elimina una hipnosis
â”‚
â””â”€â”€ 6. RESTRICCIONES PREMIUM
    â”‚
    â”œâ”€â”€ 6.1 Requiere suscripciÃ³n activa
    â”œâ”€â”€ 6.2 MÃ¡ximo 5 audios por usuario
    â””â”€â”€ 6.3 No cuenta como tarea obligatoria
Tareas AtÃ³micas para 07.8 Hipnosis
yamlCopyTAREA-07.8.1:
  Nombre: "Crear tipos de Hipnosis"
  AcciÃ³n: "Crear /src/lib/tools/hypnosis/types.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea los tipos para Crea tu Hipnosis:
    
    1. Type WaveType = 'alpha' | 'theta' | 'beta' | 'delta'
    
    2. Type VoiceType = 'male_deep' | 'male_calm' | 'whisper'
    
    3. Interface CustomHypnosis:
       - id, userId, title, script
       - waveType: WaveType
       - voiceType: VoiceType
       - audioUrl: string
       - durationSeconds: number
       - createdAt: Date
       - playCount: number
       - status: 'pending' | 'processing' | 'completed' | 'failed'
    
    4. Interface WaveConfig:
       - type: WaveType
       - name: string
       - frequency: string
       - benefit: string
       - color: string
       - backgroundUrl: string

TAREA-07.8.2:
  Nombre: "Crear configuraciÃ³n de ondas"
  AcciÃ³n: "Crear /src/lib/tools/hypnosis/waves.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la configuraciÃ³n de ondas cerebrales:
    
    export const WAVE_CONFIGS: WaveConfig[] = [
      {
        type: 'alpha',
        name: 'Ondas Alpha',
        frequency: '8-12 Hz',
        benefit: 'RelajaciÃ³n activa, creatividad, aprendizaje',
        color: '#4CAF50', // verde
        backgroundUrl: '/audio/waves/alpha.mp3'
      },
      {
        type: 'theta',
        name: 'Ondas Theta',
        frequency: '4-8 Hz',
        benefit: 'MeditaciÃ³n profunda, programaciÃ³n subconsciente',
        color: '#9C27B0', // pÃºrpura
        backgroundUrl: '/audio/waves/theta.mp3'
      },
      {
        type: 'beta',
        name: 'Ondas Beta',
        frequency: '12-30 Hz',
        benefit: 'ConcentraciÃ³n activa, energÃ­a mental',
        color: '#FF9800', // naranja
        backgroundUrl: '/audio/waves/beta.mp3'
      },
      {
        type: 'delta',
        name: 'Ondas Delta',
        frequency: '0.5-4 Hz',
        benefit: 'SueÃ±o profundo, regeneraciÃ³n celular',
        color: '#2196F3', // azul
        backgroundUrl: '/audio/waves/delta.mp3'
      }
    ];
    
    export function getWaveConfig(type: WaveType): WaveConfig

TAREA-07.8.3:
  Nombre: "Crear componente HypnosisCreator"
  AcciÃ³n: "Crear /src/components/tools/hypnosis/HypnosisCreator.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente HypnosisCreator:
    
    Props:
    - onSubmit: (data: CreateHypnosisInput) => Promise<void>
    - isLoading: boolean
    
    Estado (wizard de 4 pasos):
    - step: 1 | 2 | 3 | 4
    - title: string
    - script: string
    - waveType: WaveType
    - voiceType: VoiceType
    
    Step 1 - Escribe tu decreto:
    - Input de tÃ­tulo
    - Textarea para el script (decretos/afirmaciones)
    - Contador de palabras (max 500)
    - Sugerencias de formato
    - Ejemplos de decretos
    
    Step 2 - Selecciona la onda:
    - WaveSelector con las 4 opciones
    - ExplicaciÃ³n de cada una
    
    Step 3 - Selecciona la voz:
    - 3 opciones de voz
    - Preview de cada una (5 segundos)
    
    Step 4 - Confirmar:
    - Resumen de todo
    - EstimaciÃ³n de duraciÃ³n
    - BotÃ³n "CREAR HIPNOSIS"
    
    NavegaciÃ³n:
    - Botones Anterior/Siguiente
    - Progress indicator

TAREA-07.8.4:
  Nombre: "Crear Server Action createHypnosis"
  AcciÃ³n: "Crear /src/actions/tools/hypnosis/createHypnosis.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la Server Action createHypnosis:
    
    'use server'
    
    Input (Zod):
    - title: string (max 100)
    - script: string (max 2000 chars / 500 palabras)
    - waveType: WaveType
    - voiceType: VoiceType
    
    Proceso:
    1. Verificar autenticaciÃ³n
    2. Verificar suscripciÃ³n premium activa
    3. Contar hipnosis existentes del usuario:
       - Si >= 5: error "LÃ­mite alcanzado"
    4. Sanitizar script (eliminar contenido inapropiado)
    5. Crear registro en DB con status = 'pending'
    6. Encolar job de generaciÃ³n:
       - Llamar a ElevenLabs API para TTS
       - Mezclar voz con background de ondas
       - Subir resultado a storage
       - Actualizar registro con audioUrl y status = 'completed'
    7. Retornar registro inicial (cliente hace polling)
    
    Output:
    - { success, hypnosis: CustomHypnosis }
    
    Nota: La generaciÃ³n real es async, el cliente
    debe hacer polling o usar realtime para saber cuando estÃ¡ listo.

TAREA-07.8.5:
  Nombre: "Crear pÃ¡gina principal de Hipnosis"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/hypnosis/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/hypnosis:
    
    VerificaciÃ³n inicial:
    - Si usuario no es premium â†’ mostrar paywall
    
    Estructura (si es premium):
    1. ToolHeader: "CREA TU HIPNOSIS"
    
    2. Contador: "3/5 hipnosis creadas"
    
    3. BotÃ³n "CREAR NUEVA" (si < 5)
       â†’ navega a /tools/hypnosis/create
    
    4. Grid de HypnosisCards:
       - Mis hipnosis creadas
       - Status indicator (si estÃ¡ procesando)
       - Click â†’ reproducir
       - BotÃ³n eliminar
    
    Estado vacÃ­o:
    - Mensaje invitando a crear la primera

TAREA-07.8.6:
  Nombre: "Crear pÃ¡gina de creaciÃ³n"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/hypnosis/create/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/hypnosis/create:
    
    VerificaciÃ³n:
    - Si no premium â†’ redirect
    - Si ya tiene 5 â†’ redirect con mensaje
    
    Estructura:
    1. ToolHeader: "NUEVA HIPNOSIS"
    
    2. HypnosisCreator
    
    Funcionalidad:
    - onSubmit: llamar a createHypnosis
    - Loading state durante creaciÃ³n
    - Al completar: redirect a /tools/hypnosis/[newId]

SUBCAJA 07.9: Movilidad TÃ¡ctica (Stretching)
Herramienta de Estiramientos y Postura
Archivos a Crear
CopyRutas:
â”œâ”€â”€ /src/app/(dashboard)/tools/stretching/page.tsx
â”œâ”€â”€ /src/app/(dashboard)/tools/stretching/[routineId]/page.tsx
â”œâ”€â”€ /src/components/tools/stretching/StretchRoutineCard.tsx
â”œâ”€â”€ /src/components/tools/stretching/StretchExercise.tsx
â”œâ”€â”€ /src/lib/tools/stretching/routines.ts
â”œâ”€â”€ /src/lib/tools/stretching/types.ts
â”œâ”€â”€ /src/actions/tools/stretching/completeStretching.ts

Tiempo de GeneraciÃ³n: 30-45 minutos
Estructura del MÃ³dulo (Simplificado - Similar a Facial)
Copy07.9 Movilidad TÃ¡ctica
â”‚
â”œâ”€â”€ 1. TIPOS: StretchExercise, StretchRoutine
â”‚
â”œâ”€â”€ 2. RUTINAS (3):
â”‚   â”œâ”€â”€ morning_stretch: "ActivaciÃ³n Matutina" (5 min)
â”‚   â”œâ”€â”€ posture_fix: "CorrecciÃ³n Postural" (10 min)
â”‚   â””â”€â”€ back_relief: "Alivio de Espalda" (8 min)
â”‚
â”œâ”€â”€ 3. COMPONENTES: Similar a Facial
â”‚
â”œâ”€â”€ 4. PÃGINAS: Principal + Rutina activa
â”‚
â”œâ”€â”€ 5. SERVER ACTION: completeStretching
â”‚
â””â”€â”€ 6. VALIDACIÃ“N
    â”œâ”€â”€ Completar rutina completa
    â””â”€â”€ Vector: face_lvl +0.03 (arquetipo CARA/postura)
Tareas AtÃ³micas para 07.9 Stretching
yamlCopyTAREA-07.9.1:
  Nombre: "Crear tipos y rutinas de Stretching"
  AcciÃ³n: "Crear /src/lib/tools/stretching/"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea tipos y rutinas para Movilidad TÃ¡ctica.
    Estructura muy similar a Escultor Facial pero enfocado en:
    - Estiramientos de espalda
    - CorrecciÃ³n de postura (hombros adelantados)
    - Movilidad de cadera
    - Estiramientos de cuello
    
    3 rutinas:
    1. morning_stretch (5 min): ActivaciÃ³n suave
    2. posture_fix (10 min): Ejercicios correctivos
    3. back_relief (8 min): DescompresiÃ³n de columna

TAREA-07.9.2:
  Nombre: "Crear componentes de Stretching"
  AcciÃ³n: "Crear /src/components/tools/stretching/"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea componentes reutilizando la estructura de Facial:
    - StretchRoutineCard
    - StretchExercise
    
    Pueden ser variantes o heredar de los componentes base.

TAREA-07.9.3:
  Nombre: "Crear pÃ¡ginas de Stretching"
  AcciÃ³n: "Crear pÃ¡ginas"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea las pÃ¡ginas:
    - /tools/stretching (lista de rutinas)
    - /tools/stretching/[routineId] (rutina activa)
    
    Estructura idÃ©ntica a Facial pero con contenido de stretching.

TAREA-07.9.4:
  Nombre: "Crear Server Action completeStretching"
  AcciÃ³n: "Crear /src/actions/tools/stretching/completeStretching.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la Server Action que:
    - Valida completaciÃ³n de rutina
    - Completa tarea 'posture'
    - Afecta face_lvl +0.03

SUBCAJA 07.10: Focus Chamber (Pomodoro)
Herramienta de ConcentraciÃ³n
Archivos a Crear
CopyRutas:
â”œâ”€â”€ /src/app/(dashboard)/tools/focus/page.tsx
â”œâ”€â”€ /src/components/tools/focus/FocusTimer.tsx
â”œâ”€â”€ /src/components/tools/focus/FocusMusic.tsx
â”œâ”€â”€ /src/components/tools/focus/FocusStats.tsx
â”œâ”€â”€ /src/lib/tools/focus/presets.ts
â”œâ”€â”€ /src/lib/tools/focus/types.ts
â”œâ”€â”€ /src/lib/tools/focus/music.ts
â”œâ”€â”€ /src/actions/tools/focus/saveFocusSession.ts

Tiempo de GeneraciÃ³n: 45-60 minutos
Estructura del MÃ³dulo
Copy07.10 Focus Chamber
â”‚
â”œâ”€â”€ 1. TIPOS ESPECÃFICOS (/lib/tools/focus/types.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.1 FocusPreset
â”‚   â”‚   â”œâ”€â”€ id: string
â”‚   â”‚   â”œâ”€â”€ name: string
â”‚   â”‚   â”œâ”€â”€ workMinutes: number
â”‚   â”‚   â”œâ”€â”€ breakMinutes: number
â”‚   â”‚   â””â”€â”€ rounds: number
â”‚   â”‚
â”‚   â”œâ”€â”€ 1.2 FocusSession
â”‚   â”‚   â”œâ”€â”€ presetId: string
â”‚   â”‚   â”œâ”€â”€ startedAt: Date
â”‚   â”‚   â”œâ”€â”€ endedAt: Date
â”‚   â”‚   â”œâ”€â”€ totalFocusMinutes: number
â”‚   â”‚   â”œâ”€â”€ completedRounds: number
â”‚   â”‚   â””â”€â”€ wasInterrupted: boolean
â”‚   â”‚
â”‚   â””â”€â”€ 1.3 FocusMusicType
â”‚       â””â”€â”€ 'binaural' | 'lofi' | 'brown_noise' | 'rain' | 'silence'
â”‚
â”œâ”€â”€ 2. PRESETS DE FOCUS (/lib/tools/focus/presets.ts)
â”‚   â”‚
â”‚   â””â”€â”€ FOCUS_PRESETS: FocusPreset[]
â”‚       â”œâ”€â”€ pomodoro: 25 min work, 5 min break, 4 rounds
â”‚       â”œâ”€â”€ deep_work: 50 min work, 10 min break, 2 rounds
â”‚       â”œâ”€â”€ ultra_focus: 90 min work, 15 min break, 1 round
â”‚       â””â”€â”€ quick: 15 min work, 3 min break, 2 rounds
â”‚
â”œâ”€â”€ 3. MÃšSICA (/lib/tools/focus/music.ts)
â”‚   â”‚
â”‚   â””â”€â”€ FOCUS_MUSIC
â”‚       â”œâ”€â”€ binaural_gamma: Ondas gamma para concentraciÃ³n
â”‚       â”œâ”€â”€ lofi_beats: Lo-fi hip hop
â”‚       â”œâ”€â”€ brown_noise: Ruido marrÃ³n
â”‚       â”œâ”€â”€ rain_sounds: Lluvia
â”‚       â””â”€â”€ silence: Sin mÃºsica
â”‚
â”œâ”€â”€ 4. COMPONENTES
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.1 FocusTimer
â”‚   â”‚   â”œâ”€â”€ Props: { preset, onComplete, onInterrupt }
â”‚   â”‚   â”œâ”€â”€ Muestra:
â”‚   â”‚   â”‚   â”œâ”€â”€ Timer circular grande
â”‚   â”‚   â”‚   â”œâ”€â”€ Estado: FOCUS / BREAK
â”‚   â”‚   â”‚   â”œâ”€â”€ Round actual
â”‚   â”‚   â”‚   â””â”€â”€ Controles: Pause, Stop
â”‚   â”‚   â””â”€â”€ Funcionalidad:
â”‚   â”‚       â”œâ”€â”€ NotificaciÃ³n al terminar cada fase
â”‚   â”‚       â”œâ”€â”€ Prevenir salir de la app (warning)
â”‚   â”‚       â””â”€â”€ Tracking si app estÃ¡ en foco
â”‚   â”‚
â”‚   â”œâ”€â”€ 4.2 FocusMusic
â”‚   â”‚   â”œâ”€â”€ Props: { type, volume, onTypeChange }
â”‚   â”‚   â”œâ”€â”€ Reproductor de mÃºsica de fondo
â”‚   â”‚   â””â”€â”€ Control de volumen
â”‚   â”‚
â”‚   â””â”€â”€ 4.3 FocusStats
â”‚       â”œâ”€â”€ Props: { todayMinutes, weekMinutes }
â”‚       â””â”€â”€ VisualizaciÃ³n del tiempo enfocado
â”‚
â”œâ”€â”€ 5. PÃGINAS
â”‚   â”‚
â”‚   â””â”€â”€ 5.1 PÃ¡gina Principal (/tools/focus)
â”‚       â”œâ”€â”€ Selector de preset
â”‚       â”œâ”€â”€ Selector de mÃºsica
â”‚       â”œâ”€â”€ FocusTimer (cuando activo)
â”‚       â”œâ”€â”€ FocusStats
â”‚       â””â”€â”€ Historial de sesiones
â”‚
â”œâ”€â”€ 6. SERVER ACTIONS
â”‚   â”‚
â”‚   â””â”€â”€ 6.1 saveFocusSession
â”‚       â”œâ”€â”€ Input: session data
â”‚       â”œâ”€â”€ Calcula horas totales del dÃ­a
â”‚       â”œâ”€â”€ Si >= 3 horas: completa tarea 'focus_work'
â”‚       â””â”€â”€ Afecta wealth_lvl
â”‚
â””â”€â”€ 7. LÃ“GICA DE VALIDACIÃ“N
    â”‚
    â”œâ”€â”€ 7.1 Criterio de Completado
    â”‚   â””â”€â”€ 3 horas de focus work al dÃ­a
    â”‚
    â”œâ”€â”€ 7.2 Vector afectado
    â”‚   â””â”€â”€ wealth_lvl +0.02 por hora
    â”‚
    â””â”€â”€ 7.3 MÃ¡ximo recompensable
        â””â”€â”€ 3 horas/dÃ­a (despuÃ©s no da mÃ¡s BTC)
Tareas AtÃ³micas para 07.10 Focus Chamber
yamlCopyTAREA-07.10.1:
  Nombre: "Crear tipos de Focus"
  AcciÃ³n: "Crear /src/lib/tools/focus/types.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea los tipos para Focus Chamber:
    
    1. Interface FocusPreset:
       - id, name
       - workMinutes, breakMinutes, rounds
       - description: string
    
    2. Interface FocusSession:
       - presetId, startedAt, endedAt
       - totalFocusMinutes, completedRounds
       - wasInterrupted: boolean
       - musicType?: FocusMusicType
    
    3. Type FocusMusicType = 'binaural' | 'lofi' | 'brown_noise' | 'rain' | 'silence'
    
    4. Interface FocusDayStats:
       - date: Date
       - totalMinutes: number
       - sessionsCount: number
       - taskCompleted: boolean

TAREA-07.10.2:
  Nombre: "Crear presets y mÃºsica"
  AcciÃ³n: "Crear /src/lib/tools/focus/"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea presets.ts:
    
    FOCUS_PRESETS = [
      {
        id: 'pomodoro',
        name: 'Pomodoro ClÃ¡sico',
        workMinutes: 25,
        breakMinutes: 5,
        rounds: 4,
        description: '4 bloques de 25 min = 100 min de focus'
      },
      {
        id: 'deep_work',
        name: 'Deep Work',
        workMinutes: 50,
        breakMinutes: 10,
        rounds: 2,
        description: '2 bloques de 50 min = 100 min de focus'
      },
      {
        id: 'ultra_focus',
        name: 'Ultra Focus',
        workMinutes: 90,
        breakMinutes: 15,
        rounds: 1,
        description: '1 bloque de 90 min para trabajo intenso'
      },
      {
        id: 'quick',
        name: 'SesiÃ³n RÃ¡pida',
        workMinutes: 15,
        breakMinutes: 3,
        rounds: 2,
        description: '30 min de focus para cuando hay poco tiempo'
      }
    ]
    
    Y music.ts con configuraciÃ³n de cada tipo de mÃºsica.

TAREA-07.10.3:
  Nombre: "Crear componente FocusTimer"
  AcciÃ³n: "Crear /src/components/tools/focus/FocusTimer.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente FocusTimer:
    
    Props:
    - preset: FocusPreset
    - onComplete: (session: FocusSession) => void
    - onInterrupt: (partialSession: Partial<FocusSession>) => void
    
    Estado:
    - phase: 'work' | 'break'
    - currentRound: number
    - timeRemaining: number (segundos)
    - isPaused: boolean
    - totalFocusTime: number (acumulado)
    
    Estructura:
    - CÃ­rculo grande con timer
    - Color segÃºn phase (rojo=work, verde=break)
    - Texto: "ENFÃ“CATE" / "DESCANSA"
    - Round indicator: "Round 2/4"
    - Controles: Pause, Stop (con confirmaciÃ³n)
    
    Funcionalidad:
    - Al terminar work â†’ notificaciÃ³n â†’ auto-start break
    - Al terminar break â†’ notificaciÃ³n â†’ auto-start work
    - Al completar todos los rounds â†’ onComplete
    - Stop antes de terminar â†’ onInterrupt
    - Page Visibility: pausar si sale de la app (opcional warning)
    
    Sonidos:
    - Bell suave al cambiar de fase

TAREA-07.10.4:
  Nombre: "Crear componente FocusMusic"
  AcciÃ³n: "Crear /src/components/tools/focus/FocusMusic.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea el componente FocusMusic:
    
    Props:
    - currentType: FocusMusicType
    - onTypeChange: (type: FocusMusicType) => void
    - volume: number (0-100)
    - onVolumeChange: (volume: number) => void
    - isPlaying: boolean
    
    Estructura:
    - Selector horizontal de tipos de mÃºsica (iconos)
    - Slider de volumen
    - Visualizador simple de ondas (si reproduciÃ©ndose)
    
    Funcionalidad:
    - ReproducciÃ³n en loop
    - Fade entre cambios de tipo
    - Guardar preferencia en localStorage

TAREA-07.10.5:
  Nombre: "Crear Server Action saveFocusSession"
  AcciÃ³n: "Crear /src/actions/tools/focus/saveFocusSession.ts"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la Server Action saveFocusSession:
    
    'use server'
    
    Input (Zod):
    - presetId: string
    - totalFocusMinutes: number
    - completedRounds: number
    - wasInterrupted: boolean
    
    Proceso:
    1. Verificar autenticaciÃ³n
    2. Guardar sesiÃ³n en focus_sessions (o tool_progress)
    3. Calcular total de minutos de hoy:
       - Sumar todas las sesiones del dÃ­a
    4. Si totalHoy >= 180 (3 horas) Y no taskCompleted hoy:
       - Llamar a completeToolSession('focus', ...)
       - Marcar dÃ­a como completado
    5. Calcular BTC:
       - 20 BTC por hora (mÃ¡x 60 BTC/dÃ­a)
    
    Output:
    - { success, session, todayTotal, taskCompleted, btcEarned }

TAREA-07.10.6:
  Nombre: "Crear pÃ¡gina de Focus"
  AcciÃ³n: "Crear /src/app/(dashboard)/tools/focus/page.tsx"
  Responsable: Antigravity
  Prompt para Antigravity: |
    Crea la pÃ¡gina /tools/focus:
    
    Estado:
    - selectedPreset: FocusPreset | null
    - isSessionActive: boolean
    - musicType: FocusMusicType
    - musicVolume: number
    
    Estructura:
    
    1. ToolHeader: "FOCUS CHAMBER"
    
    2. Si isSessionActive:
       - FocusTimer fullscreen-ish
       - FocusMusic en la parte inferior
       - BotÃ³n "Terminar sesiÃ³n"
    
    3. Si !isSessionActive:
       a. FocusStats del dÃ­a:
          - "Hoy: 1.5h / 3h objetivo"
          - Barra de progreso
       
       b. Selector de Preset:
          - Cards de cada preset
          - Tiempo total estimado
          - Click selecciona
       
       c. Selector de MÃºsica:
          - FocusMusic (mini)
       
       d. BotÃ³n "INICIAR SESIÃ“N"
    
    4. Historial:
       - Ãšltimas 5 sesiones
       - Fecha, duraciÃ³n, completado

RESUMEN DE CAJA 07: ARSENAL DE HERRAMIENTAS
Copyâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                      â•‘
â•‘                    ğŸ“¦ CAJA 07 - RESUMEN DE ENTREGABLES                              â•‘
â•‘                                                                                      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                      â•‘
â•‘  SUBCAJA                      â”‚ ARCHIVOS   â”‚ TAREAS â”‚ TIEMPO EST.                   â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â•‘
â•‘  07.1 Arquitectura Arsenal   â”‚    15      â”‚   15   â”‚ 30-45 min                      â•‘
â•‘  07.2 Biblioteca de Poder    â”‚    10      â”‚    9   â”‚ 45-60 min                      â•‘
â•‘  07.3 Templo del Hierro      â”‚    14      â”‚   12   â”‚ 60-75 min                      â•‘
â•‘  07.4 CÃ¡mara de MeditaciÃ³n   â”‚     8      â”‚    8   â”‚ 45-60 min                      â•‘
â•‘  07.5 BitÃ¡cora de Guerra     â”‚    10      â”‚    7   â”‚ 45-60 min                      â•‘
â•‘  07.6 Vitalidad Sexual       â”‚     6      â”‚    5   â”‚ 30-45 min                      â•‘
â•‘  07.7 Escultor Facial        â”‚     8      â”‚    5   â”‚ 30-45 min                      â•‘
â•‘  07.8 Crea tu Hipnosis       â”‚    10      â”‚    6   â”‚ 45-60 min                      â•‘
â•‘  07.9 Movilidad TÃ¡ctica      â”‚     6      â”‚    4   â”‚ 30-45 min                      â•‘
â•‘  07.10 Focus Chamber         â”‚     8      â”‚    6   â”‚ 45-60 min                      â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â•‘
â•‘  TOTAL CAJA 07               â”‚ ~95 archiv â”‚   77   â”‚ 6-8 horas                      â•‘
â•‘                                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ACTUALIZACIÃ“N DEL PROGRESO TOTAL
Copyâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         PROGRESO DE DESGLOSE ATÃ“MICO                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                      â•‘
â•‘  ğŸ“¦ CAJA 01: DocumentaciÃ³n Fundacional    â”‚ 9 subcajas  â”‚  92 tareas â”‚ âœ… COMPLETO  â•‘
â•‘  ğŸ“¦ CAJA 02: Infraestructura y DevOps     â”‚ 8 subcajas  â”‚  50 tareas â”‚ âœ… COMPLETO  â•‘
â•‘  ğŸ“¦ CAJA 03: Base de Datos y Backend      â”‚ 8 subcajas  â”‚  63 tareas â”‚ âœ… COMPLETO  â•‘
â•‘  ğŸ“¦ CAJA 04: Motor Core (LÃ³gica Pura)     â”‚ 10 subcajas â”‚  82 tareas â”‚ âœ… COMPLETO  â•‘
â•‘  ğŸ“¦ CAJA 05: AutenticaciÃ³n y Onboarding   â”‚ 7 subcajas  â”‚  42 tareas â”‚ âœ… COMPLETO  â•‘
â•‘  ğŸ“¦ CAJA 06: Dashboard y UI               â”‚ 9 subcajas  â”‚  42 tareas â”‚ âœ… COMPLETO  â•‘
â•‘  ğŸ“¦ CAJA 07: Arsenal de Herramientas      â”‚ 10 subcajas â”‚  77 tareas â”‚ âœ… COMPLETO  â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘
â•‘  ğŸ“¦ CAJA 08: IA Generativa                â”‚ ?? subcajas â”‚  ?? tareas â”‚ â³ PENDIENTE â•‘
â•‘  ğŸ“¦ CAJA 09: EconomÃ­a y Tienda            â”‚ ?? subcajas â”‚  ?? tareas â”‚ â³ PENDIENTE â•‘
â•‘  ğŸ“¦ CAJA 10: MonetizaciÃ³n (Stripe)        â”‚ ?? subcajas â”‚  ?? tareas â”‚ â³ PENDIENTE â•‘
â•‘  ğŸ“¦ CAJA 11: Notificaciones y Realtime    â”‚ ?? subcajas â”‚  ?? tareas â”‚ â³ PENDIENTE â•‘
â•‘  ğŸ“¦ CAJA 12: Observabilidad y Calidad     â”‚ ?? subcajas â”‚  ?? tareas â”‚ â³ PENDIENTE â•‘
â•‘  ğŸ“¦ CAJA 13: Lanzamiento y Operaciones    â”‚ ?? subcajas â”‚  ?? tareas â”‚ â³ PENDIENTE â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘
â•‘  TOTAL DESGLOSADO HASTA AHORA             â”‚ 61 subcajas â”‚ 448 tareas â”‚ 7/13 CAJAS   â•‘
â•‘                                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•